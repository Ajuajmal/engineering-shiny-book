<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Building an “ipsum-app” | Engineering Production-Grade Shiny Apps</title>
  <meta name="description" content="Chapter 10 Building an “ipsum-app” | Engineering Production-Grade Shiny Apps" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Building an “ipsum-app” | Engineering Production-Grade Shiny Apps" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 10 Building an “ipsum-app” | Engineering Production-Grade Shiny Apps" />
  <meta name="github-repo" content="ThinkR-open/building-shiny-apps-workflow" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Building an “ipsum-app” | Engineering Production-Grade Shiny Apps" />
  
  <meta name="twitter:description" content="Chapter 10 Building an “ipsum-app” | Engineering Production-Grade Shiny Apps" />
  

<meta name="author" content="Colin Fay, Sébastien Rochette, Vincent Guyader, Cervan Girard" />


<meta name="date" content="2020-04-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="setting-up-for-success-with-golem.html"/>
<link rel="next" href="stepbuild.html"/>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149994171-1');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/thinkr.css" type="text/css" />
<link rel="stylesheet" href="css/style_gitbook.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Production-Grade Shiny Apps</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="part"><span><b>I Building Successful Shiny Apps</b></span></li>
<li class="chapter" data-level="1" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html"><i class="fa fa-check"></i><b>1</b> About Successful Shiny Apps</a></li>
<li class="chapter" data-level="2" data-path="planning.html"><a href="planning.html"><i class="fa fa-check"></i><b>2</b> Planning Ahead</a></li>
<li class="chapter" data-level="3" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>3</b> Structuring your Project</a></li>
<li class="chapter" data-level="4" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>4</b> Introduction to <code>{golem}</code></a></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> The workflow</a></li>
<li class="part"><span><b>II Step 1: Design</b></span></li>
<li class="chapter" data-level="6" data-path="matters.html"><a href="matters.html"><i class="fa fa-check"></i><b>6</b> UX Matters</a></li>
<li class="chapter" data-level="7" data-path="step-design.html"><a href="step-design.html"><i class="fa fa-check"></i><b>7</b> Don’t rush into coding</a></li>
<li class="chapter" data-level="8" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>8</b> A Gentle Introduction to CSS</a></li>
<li class="part"><span><b>III Step 2: Prototype</b></span></li>
<li class="chapter" data-level="9" data-path="setting-up-for-success-with-golem.html"><a href="setting-up-for-success-with-golem.html"><i class="fa fa-check"></i><b>9</b> Setting up for success with <code>{golem}</code></a></li>
<li class="chapter" data-level="10" data-path="stepprotopype.html"><a href="stepprotopype.html"><i class="fa fa-check"></i><b>10</b> Building an “ipsum-app”</a></li>
<li class="part"><span><b>IV Step 3: Build</b></span></li>
<li class="chapter" data-level="11" data-path="stepbuild.html"><a href="stepbuild.html"><i class="fa fa-check"></i><b>11</b> Building app with <code>{golem}</code></a></li>
<li class="part"><span><b>V Step 4: Strengthen</b></span></li>
<li class="chapter" data-level="12" data-path="step-secure.html"><a href="step-secure.html"><i class="fa fa-check"></i><b>12</b> Build yourself a safety net</a></li>
<li class="chapter" data-level="13" data-path="secure.html"><a href="secure.html"><i class="fa fa-check"></i><b>13</b> Version Control</a></li>
<li class="chapter" data-level="14" data-path="deploy-golem.html"><a href="deploy-golem.html"><i class="fa fa-check"></i><b>14</b> Deploy your application</a></li>
<li class="part"><span><b>VI Optimizing</b></span></li>
<li class="chapter" data-level="15" data-path="when-optimize.html"><a href="when-optimize.html"><i class="fa fa-check"></i><b>15</b> The Need for Optimization</a></li>
<li class="chapter" data-level="16" data-path="optim-caveat.html"><a href="optim-caveat.html"><i class="fa fa-check"></i><b>16</b> Common Application Caveats</a></li>
<li class="chapter" data-level="17" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html"><i class="fa fa-check"></i><b>17</b> Optimizing Shiny Code</a></li>
<li class="chapter" data-level="18" data-path="optimjs.html"><a href="optimjs.html"><i class="fa fa-check"></i><b>18</b> Using JavaScript</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://rtask.thinkr.fr">A book by the ThinkR team</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Production-Grade Shiny Apps</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stepprotopype" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Building an “ipsum-app”</h1>
<div id="prototyping-is-crucial" class="section level2">
<h2><span class="header-section-number">10.1</span> Prototyping is crucial</h2>
<div id="prototype-then-polish" class="section level3">
<h3><span class="header-section-number">10.1.1</span> Prototype, then polish</h3>
<blockquote>
<p>Prototyping first may help keep you from investing far too much time for marginal gains.</p>
</blockquote>
<p><a href="http://www.catb.org/~esr/writings/taoup/html/ch01s06.html#rule_of_optimization" class="uri">http://www.catb.org/~esr/writings/taoup/html/ch01s06.html#rule_of_optimization</a></p>
<p>And yet another Rule from the Art of Unix Programming: “Rule of Optimization: Prototype before polishing. <strong>Get it working before you optimize it</strong>.”</p>
<p>Getting things to work before trying to optimize the app is always a good approach:</p>
<ul>
<li>Making things work before working on low level optimization makes the whole engineering process easier: having a “minimal viable product” that works, even if slowly and not perfectly, gives a stronger sense of success to the project.
For example if you are building a vehicle, it feels more of a success to start with a skateboard than with a wheel: you quickly have a product that can be used to move, not waiting for the end of the project before finally having something useful.</li>
</ul>
<p><img src="img/mvp.png" /></p>
<ul>
<li>Abstraction is hard, and makes the code base harder to work with.
You have heard a lot that if you are copying and pasting something more than twice, you should write a function.
And with Shiny, if you are writing a piece of the app more than twice, you should write modules.
But while these kind of abstractions are elegant and optimized, they can make the software harder to work on while building it.
So before focusing on turning something into a function, make it work first.
As said in <a href="https://r4ds.had.co.nz/">R for Data Science</a> about abstraction with <code>{purrr}</code>:</li>
</ul>
<blockquote>
<p>Once you master these functions, you’ll find it takes much less time to solve iteration problems. But you should never feel bad about using a for loop instead of a map function. The map functions are a step up a tower of abstraction, and it can take a long time to get your head around how they work. The important thing is that you solve the problem that you’re working on, not write the most concise and elegant code (although that’s definitely something you want to strive towards!).</p>
</blockquote>
<!--SHINY.SINGLETON[1efbbb1390b1f2da3adcc5776ac72d01ac3af14a]-->
<style>.right{ text-align: right;}</style>
<!--/SHINY.SINGLETON[1efbbb1390b1f2da3adcc5776ac72d01ac3af14a]-->
<div class="right">
<a href="https://r4ds.had.co.nz/iteration.html">R for Data Science - 21.5 The map functions</a>
</div>
<p>As a small example, we can refer to the binding module from <code>{hexmake}</code>: this module manipulates namespaces, inputs and <code>session</code> to automatically bind inputs to the R6 object containing the image (see implementation <a href="https://github.com/ColinFay/hexmake/blob/master/R/mod_binder.R#L29">here</a>, <a href="https://github.com/ColinFay/hexmake/blob/master/R/utils_server.R#L2">here</a> and <a href="https://github.com/ColinFay/hexmake/blob/master/R/mod_left.R#L60">here</a>).
That’s an elegant solution: instead of duplicating content, we use functions to automatically bind events.
But that is a higher level of abstraction: we manipulate different levels of namespacing and inputs, making it harder to reason about when you have to change the code base.</p>
<ul>
<li><p>It’s hard to identify upfront the real bottlenecks of the app.
As long as the app is not in a working state, it is very hard to identify the real pieces of code that need to be optimized.
Chances are that if you ask yourself upfront what the app bottlenecks will be, you will not aim right.
So instead of losing time focusing on specific pieces of code you think need to be optimized, start by having something that works, then optimize the code.
In other words, “<em>Make It Work. Make It Right. Make It Fast</em>”, (<a href="https://wiki.c2.com/?MakeItWorkMakeItRightMakeItFast">KentBeck</a>).</p></li>
<li><p>It’s easier to spot mistakes when you have something the can run.
If a piece of software runs, it is straightforward to check if a change in the codebase break the software or not: it either still run or not.</p></li>
</ul>
</div>
<div id="the-ui-first-approach" class="section level3">
<h3><span class="header-section-number">10.1.2</span> The “UI first” approach</h3>
<p>Using what can be called a “UI first” approach when building an app is in most cases the safest way to fo.
And for two main reasons.</p>
<div id="agreeing-on-specification" class="section level4">
<h4><span class="header-section-number">10.1.2.1</span> Agreeing on specification</h4>
<p>First of all, it helps everybody involved in the application to agree on what the app is supposed to do, and once the UI is set, there should be no “surprise implementation”.
Well, at least, this is the best way to reduce the number of changes in the app, as the sooner we have a global idea of the app the better: it is hard to implement a core new feature once the app is 90% finished, while it would have been way easier to implement it if it has been detected from the very start.
Indeed, implementing core feature once the app is very advanced can be critical, as our application might not have been thought to work the way it now needs to work, so adding certain elements might lead to a need for change in the core architecture of the app.</p>
<p>Once we agree on what elements compose the app, there should be no sudden “oh the app needs to do that thing now, sorry I hadn’t realized that before”.
And we can not blame the person ordering the app for not realizing everything needed: it is really hard to have a mental model of the whole app when we are writing specifications, not to mention when reading them.
On the other hand, having a mock application with the UI really helps realizing what the app is doing and how it works, and to agree with the developer that this is actually what we want our application to do (or realizing that this is not something we actually need).</p>
<p>Prototyping the UI first should require the least possible computation from the server-side of your application.
You focus on the appearance of the app: buttons, figures, tables, graphs… and how they interact with each other.
At that stage of the design process, you will not be focusing on correctness of the results or graphs: you will be placing elements on the front-end so that you can be sure that everything is there, even if some buttons do not trigger anything.
At that point, the idea is to get the people ordering the app think about what they actually need, and there might be some question rising like “oh, where is the button to download that results in pdf?”.
And at that precise moment is the perfect time for a change in specification.</p>
</div>
<div id="organising-work" class="section level4">
<h4><span class="header-section-number">10.1.2.2</span> Organising work</h4>
<p>A pre-defined UI allows every person involved in the coding process to know which part of the app they are working on, and to be sure that you do not forget anything.
As you might be working on the app as a team, you will need to find a strategy for efficiently splitting the work between every coder.
And it’s much easier to work on a piece of the app you can visually identify and integrate in a complete app scenario.
In other words, it is easier to be told “you will be working on the ‘Summary’ panel from that mock UI” than “you will be working on bullet point 45 to 78 of the specifications”.</p>
</div>
</div>
</div>
<div id="prototyping-shiny" class="section level2">
<h2><span class="header-section-number">10.2</span> Prototyping Shiny</h2>
<p>In the next section, you will be introduced to two packages that can be used when prototyping user interface: <code>{shinipsum}</code> and <code>{fakir}</code>.</p>
<div id="fast-ui-prototyping-with-shinipsum" class="section level3">
<h3><span class="header-section-number">10.2.1</span> Fast UI Prototyping with <code>{shinipsum}</code></h3>
<p>When prototyping the UI for an application, we will not be focusing on building the actual computation: what we need is creating a draft with visual components, so that we can have visual clues about the end result.
To do that, you can use the <code>{shinipsum}</code> package, which has been designed to generate random shiny elements.
If you are familiar with “lorem ipsum”, the fake text generator that is used in software design as a placeholder for text, the idea is the same: generating placeholders for Shiny outputs.</p>
<p>You can install this package from GitHub with:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="stepprotopype.html#cb115-1"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;Thinkr-open/shinipsum&quot;</span>)</span></code></pre></div>
<p>In this package, a series of functions that generates random placeholders.
For example, <code>random_ggplot()</code> generates random <code>{ggplot2}</code> elements.
If we run this code two time, we should get different results<a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a>:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="stepprotopype.html#cb116-1"></a><span class="kw">library</span>(shinipsum)</span>
<span id="cb116-2"><a href="stepprotopype.html#cb116-2"></a><span class="kw">library</span>(ggplot2)</span></code></pre></div>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="stepprotopype.html#cb117-1"></a><span class="kw">random_ggplot</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb117-2"><a href="stepprotopype.html#cb117-2"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Random plot&quot;</span>) </span></code></pre></div>
<p><img src="engineering-production-grade-shiny-apps_files/figure-html/10-prototyping-3-1.png" width="672" /></p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="stepprotopype.html#cb118-1"></a><span class="kw">random_ggplot</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb118-2"><a href="stepprotopype.html#cb118-2"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Random plot&quot;</span>) </span></code></pre></div>
<p><img src="engineering-production-grade-shiny-apps_files/figure-html/10-prototyping-4-1.png" width="672" /></p>
<p>Of course, the idea is to combine this with a Shiny interface, for example <code>random_ggplot()</code> will be used with a <code>renderPlot()</code> and <code>plotOutput()</code>.
And as we want to prototype but still be close to what the app might look like, these functions take arguments that can shape the output: for example, <code>random_ggplot()</code> has a <code>type</code> parameter that can help you select a specific geom.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="stepprotopype.html#cb119-1"></a><span class="kw">library</span>(shiny)</span>
<span id="cb119-2"><a href="stepprotopype.html#cb119-2"></a><span class="kw">library</span>(shinipsum)</span>
<span id="cb119-3"><a href="stepprotopype.html#cb119-3"></a><span class="kw">library</span>(DT)</span></code></pre></div>
<pre><code>
Attaching package: &#39;DT&#39;</code></pre>
<pre><code>The following objects are masked from &#39;package:shiny&#39;:

    dataTableOutput, renderDataTable</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="stepprotopype.html#cb122-1"></a>ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</span>
<span id="cb122-2"><a href="stepprotopype.html#cb122-2"></a>  <span class="kw">h2</span>(<span class="st">&quot;A Random DT&quot;</span>),</span>
<span id="cb122-3"><a href="stepprotopype.html#cb122-3"></a>  <span class="kw">DTOutput</span>(<span class="st">&quot;data_table&quot;</span>),</span>
<span id="cb122-4"><a href="stepprotopype.html#cb122-4"></a>  <span class="kw">h2</span>(<span class="st">&quot;A Random Plot&quot;</span>),</span>
<span id="cb122-5"><a href="stepprotopype.html#cb122-5"></a>  <span class="kw">plotOutput</span>(<span class="st">&quot;plot&quot;</span>),</span>
<span id="cb122-6"><a href="stepprotopype.html#cb122-6"></a>  <span class="kw">h2</span>(<span class="st">&quot;A Random Text&quot;</span>),</span>
<span id="cb122-7"><a href="stepprotopype.html#cb122-7"></a>  <span class="kw">tableOutput</span>(<span class="st">&quot;text&quot;</span>)</span>
<span id="cb122-8"><a href="stepprotopype.html#cb122-8"></a>)</span>
<span id="cb122-9"><a href="stepprotopype.html#cb122-9"></a></span>
<span id="cb122-10"><a href="stepprotopype.html#cb122-10"></a>server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {</span>
<span id="cb122-11"><a href="stepprotopype.html#cb122-11"></a>  output<span class="op">$</span>data_table &lt;-<span class="st"> </span>DT<span class="op">::</span><span class="kw">renderDT</span>({</span>
<span id="cb122-12"><a href="stepprotopype.html#cb122-12"></a>    <span class="kw">random_DT</span>(<span class="dv">5</span>, <span class="dv">5</span>)</span>
<span id="cb122-13"><a href="stepprotopype.html#cb122-13"></a>  })</span>
<span id="cb122-14"><a href="stepprotopype.html#cb122-14"></a>  output<span class="op">$</span>plot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({</span>
<span id="cb122-15"><a href="stepprotopype.html#cb122-15"></a>    <span class="kw">random_ggplot</span>()</span>
<span id="cb122-16"><a href="stepprotopype.html#cb122-16"></a>  })</span>
<span id="cb122-17"><a href="stepprotopype.html#cb122-17"></a>  output<span class="op">$</span>text &lt;-<span class="st"> </span><span class="kw">renderText</span>({</span>
<span id="cb122-18"><a href="stepprotopype.html#cb122-18"></a>    <span class="kw">random_text</span>(<span class="dt">nwords =</span> <span class="dv">50</span>)</span>
<span id="cb122-19"><a href="stepprotopype.html#cb122-19"></a>  })</span>
<span id="cb122-20"><a href="stepprotopype.html#cb122-20"></a>}</span>
<span id="cb122-21"><a href="stepprotopype.html#cb122-21"></a><span class="kw">shinyApp</span>(ui, server)</span></code></pre></div>
<div style="width: 100% ; height: 400px ; text-align: center; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" class="muted well">Shiny applications not supported in static R Markdown documents</div>
<p>Other <code>{shinipsum}</code> functions include:</p>
<ul>
<li>tables:</li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="stepprotopype.html#cb123-1"></a><span class="kw">random_table</span>(<span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>  Plant   Type  Treatment conc uptake Plant.1 Type.1
1   Qn1 Quebec nonchilled   95   16.0     Qn1 Quebec
2   Qn1 Quebec nonchilled  175   30.4     Qn1 Quebec
3   Qn1 Quebec nonchilled  250   34.8     Qn1 Quebec
  Treatment.1 conc.1 uptake.1
1  nonchilled     95     16.0
2  nonchilled    175     30.4
3  nonchilled    250     34.8</code></pre>
<ul>
<li>print outputs:</li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="stepprotopype.html#cb125-1"></a><span class="kw">random_print</span>(<span class="dt">type =</span> <span class="st">&quot;model&quot;</span>)</span></code></pre></div>
<pre><code>
Call:
lm(formula = Sepal.Length ~ Sepal.Width, data = datasets::iris)

Coefficients:
(Intercept)  Sepal.Width  
      6.526       -0.223  </code></pre>
<p>… and text, image, ggplotly, dygraph, and DT.</p>
</div>
<div id="using-fakir-for-fake-data-generation" class="section level3">
<h3><span class="header-section-number">10.2.2</span> Using <code>{fakir}</code> for fake data generation</h3>
<p>Generating random placeholder for Shiny might not be enough: maybe you also need example datasets.</p>
<p>This can be accomplished using the <code>{fakir}</code> package, which was primarily created to provide fake datasets for R tutorials and exercises, but that can easily be used inside a Shiny application.</p>
<p>At the time of writing these lines, the package is only available on GitHub, and can be installed with:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="stepprotopype.html#cb127-1"></a>remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;Thinkr-open/fakir&quot;</span>)</span></code></pre></div>
<p>This package contains three “datasets”, that are randomly generated when you call the corresponding functions:</p>
<ul>
<li><p><code>fake_base_clients()</code> generates a fake dataset for a ticketing service</p></li>
<li><p><code>fake_sondage_answers()</code> is a fake survey about transportation</p></li>
<li><p><code>fake_visits()</code> is a fake dataset for the visits on a website</p></li>
</ul>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="stepprotopype.html#cb128-1"></a><span class="kw">library</span>(fakir)</span>
<span id="cb128-2"><a href="stepprotopype.html#cb128-2"></a><span class="kw">fake_visits</span>(<span class="dt">from =</span> <span class="st">&quot;2017-01-01&quot;</span>, <span class="dt">to =</span> <span class="st">&quot;2017-01-31&quot;</span>)</span></code></pre></div>
<pre><code>[90m# A tibble: 31 x 8[39m
   timestamp   year month   day  home about  blog
 [90m*[39m [3m[90m&lt;date&gt;[39m[23m     [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;dbl&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m [3m[90m&lt;int&gt;[39m[23m
[90m 1[39m 2017-01-01  [4m2[24m017     1     1   369   220   404
[90m 2[39m 2017-01-02  [4m2[24m017     1     2   159   250   414
[90m 3[39m 2017-01-03  [4m2[24m017     1     3   436   170   498
[90m 4[39m 2017-01-04  [4m2[24m017     1     4    [31mNA[39m   258   526
[90m 5[39m 2017-01-05  [4m2[24m017     1     5   362    [31mNA[39m   407
[90m 6[39m 2017-01-06  [4m2[24m017     1     6   245   145   576
[90m 7[39m 2017-01-07  [4m2[24m017     1     7    [31mNA[39m    [31mNA[39m   484
[90m 8[39m 2017-01-08  [4m2[24m017     1     8   461   103   441
[90m 9[39m 2017-01-09  [4m2[24m017     1     9   337   113   673
[90m10[39m 2017-01-10  [4m2[24m017     1    10    [31mNA[39m   169   308
[90m# … with 21 more rows, and 1 more variable:[39m
[90m#   contact [3m[90m&lt;int&gt;[90m[23m[39m</code></pre>
<p>The idea with these datasets is to combine various formats that can reflect “real life” datasets: they contain dates, numeric and character variables, and have missing values.
They can also be manipulated with the included <code>{sf}</code> geographical dataset <code>fra_sf</code> allowing for maps creation.</p>
<p>Fake datasets created with <code>{fakir}</code> can be used to build light examples on the use of the inputs, for filters or interactive map, or as examples for the internal functions and their corresponding documentation.</p>
</div>
</div>
<div id="proto-rmdfirst" class="section level2">
<h2><span class="header-section-number">10.3</span> Building with RMarkdown</h2>
<p>While on one side you are building the user interface, you (or someone from your team) can start working on the back-end implementation.
Again, this should be done out of any reactive logic: the back-end should not depend on any reactive context.
And because documentation is gold, you should start with writing the back-end documentation straight as package documentation, inside your Vignettes.
Or what we call “Rmd-first”.</p>
<div id="define-the-content-of-the-application" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Define the content of the application</h3>
<p>Rmarkdown files are the perfect spot to sandbox the back-end of your application: inside the file, you are not disrupted by any reactive behavior, as you are just working with plain old R code: data wrangling operations, multi-parameters based models, summary tables outputs, graphical outputs…</p>
<p>And the nice thing is that you can share the output of the rendered file as an HTML or PDF to either your client or boss, or anyone ordering the application.
That way, you can drive the discussion to be focused on discussing the core algorithm, not some details like “I want the button to be blue” when what you need to know is if the output of the model is correct-in other words, you are again applying the rule of the separation of concerns, i.e. you help focusing on one part of the application without adding any cognitive load to the person “reading” the outputs.</p>
<p>And also, last but not least, if you have to implement changes to the back-end functions, it is way easier to check and to share in a static file than in an application.</p>
<p>When doing that, the best way is again to separate things: do not be afraid of writing multiple RMarkdown files, one for each part of the end application.
Again, this will help everybody focus on what matter: be it you, your team, or the person ordering the application.</p>
<p>Building the back-end in Rmd files is also a good way to make the back-end “application independent”, in the sense that it helps documenting how the algorithms you have been building can be used outside of the application.
In many cases, when you are building an application, you are creating functions that contain business logic/domain expertise, and that can in fact be used outside of the application.
Writing these functions and how they work together forces you to think about these functions, and also gives a good starting point for anybody familiar with R that would want to start using this back-end toolkit.
Of course, as you are building your application as a package, it is way easier now: you can share a package with the application inside it, along with a function to launch the app but also functions that can be used outside.</p>
<p>And if you need some data to use as an example, feel free to pick one from <code>{fakir}</code>! (See §<a href="stepprotopype.html#stepprotopype">10</a>).</p>
</div>
<div id="using-the-rmd-files-as-a-laboratory-notebook" class="section level3">
<h3><span class="header-section-number">10.3.2</span> Using the Rmd files as a laboratory notebook</h3>
<p>Rmd can also be used as the place to keep track of what you have in mind while creating the application: most of the time, you will create the functions inside the <code>R/</code> folder, but it might not be the perfect place to document your thought process.
On the other hand, using Markdown as a kind of “software laboratory notebook” to keep track of your idea is a good way to document all the choices you have made about your data wrangling, models, visualization, so that you can use it as a common knowledge-base all along the application life: you can share this with your client, with the rest of your team, or with anybody involved in the project.</p>
<p>And also, developing in multiple Rmd files helps the separation of work between multiple developers, and will reduce code conflicts during development.</p>
</div>
<div id="rmd-vignettes-and-documentation-first" class="section level3">
<h3><span class="header-section-number">10.3.3</span> Rmd, Vignettes, and documentation first</h3>
<p>Working with the <code>{golem}</code> framework implies that you will build the application as an R package.
And of course, an R package implies writing documentation: one of the main goals of the Vignettes, in an R package, is to document how to use the package.
And the good news is that when checking a package, <em>i.e</em> when running <code>devtools::check()</code> or <code>R CMD check</code>, the Vignettes are going to be built, and the process will fail if at least one of the Vignette fails to render.
That way, you can use the documentation of the back-end as an extra tool for doing unit-testing!</p>
<p>One radical approach to the “Rmd first” philosophy is to write <strong>everything</strong> in an Rmd from the very beginning of your project: write the function code, there roxygen tags, their tests, etc, then move everything to the correct spot in the package infrastructure once you are happy with everything. And of course, when you need to add another feature to your app, open a new markdown and start the process of development and documentation again.</p>

</div>
</div>
</div>



<hr/>
<footer>
<a href="rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"/></a>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="setting-up-for-success-with-golem.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="stepbuild.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ThinkR-open/building-shiny-apps-workflow/edit/master/10-prototyping.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
