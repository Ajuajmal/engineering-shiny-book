<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Building app with {golem} | Engineering Production-Grade Shiny Apps</title>
  <meta name="description" content="Chapter 11 Building app with {golem} | Engineering Production-Grade Shiny Apps" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Building app with {golem} | Engineering Production-Grade Shiny Apps" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 11 Building app with {golem} | Engineering Production-Grade Shiny Apps" />
  <meta name="github-repo" content="ThinkR-open/building-shiny-apps-workflow" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Building app with {golem} | Engineering Production-Grade Shiny Apps" />
  
  <meta name="twitter:description" content="Chapter 11 Building app with {golem} | Engineering Production-Grade Shiny Apps" />
  

<meta name="author" content="Colin Fay, Sébastien Rochette, Vincent Guyader, Cervan Girard" />


<meta name="date" content="2020-04-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="stepprotopype.html"/>
<link rel="next" href="step-secure.html"/>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149994171-1');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/thinkr.css" type="text/css" />
<link rel="stylesheet" href="css/style_gitbook.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Production-Grade Shiny Apps</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="part"><span><b>I Building Successful Shiny Apps</b></span></li>
<li class="chapter" data-level="1" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html"><i class="fa fa-check"></i><b>1</b> About Successful Shiny Apps</a></li>
<li class="chapter" data-level="2" data-path="planning.html"><a href="planning.html"><i class="fa fa-check"></i><b>2</b> Planning Ahead</a></li>
<li class="chapter" data-level="3" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>3</b> Structuring your Project</a></li>
<li class="chapter" data-level="4" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>4</b> Introduction to <code>{golem}</code></a></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> The workflow</a></li>
<li class="part"><span><b>II Step 1: Design</b></span></li>
<li class="chapter" data-level="6" data-path="matters.html"><a href="matters.html"><i class="fa fa-check"></i><b>6</b> UX Matters</a></li>
<li class="chapter" data-level="7" data-path="step-design.html"><a href="step-design.html"><i class="fa fa-check"></i><b>7</b> Don’t rush into coding</a></li>
<li class="chapter" data-level="8" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>8</b> A Gentle Introduction to CSS</a></li>
<li class="part"><span><b>III Step 2: Prototype</b></span></li>
<li class="chapter" data-level="9" data-path="setting-up-for-success-with-golem.html"><a href="setting-up-for-success-with-golem.html"><i class="fa fa-check"></i><b>9</b> Setting up for success with <code>{golem}</code></a></li>
<li class="chapter" data-level="10" data-path="stepprotopype.html"><a href="stepprotopype.html"><i class="fa fa-check"></i><b>10</b> Building an “ipsum-app”</a></li>
<li class="part"><span><b>IV Step 3: Build</b></span></li>
<li class="chapter" data-level="11" data-path="stepbuild.html"><a href="stepbuild.html"><i class="fa fa-check"></i><b>11</b> Building app with <code>{golem}</code></a></li>
<li class="part"><span><b>V Step 4: Strengthen</b></span></li>
<li class="chapter" data-level="12" data-path="step-secure.html"><a href="step-secure.html"><i class="fa fa-check"></i><b>12</b> Build yourself a safety net</a></li>
<li class="chapter" data-level="13" data-path="secure.html"><a href="secure.html"><i class="fa fa-check"></i><b>13</b> Version Control</a></li>
<li class="part"><span><b>VI Step 5: Deploy</b></span></li>
<li class="chapter" data-level="14" data-path="deploy-golem.html"><a href="deploy-golem.html"><i class="fa fa-check"></i><b>14</b> Deploy your application</a></li>
<li class="part"><span><b>VII Optimizing</b></span></li>
<li class="chapter" data-level="15" data-path="when-optimize.html"><a href="when-optimize.html"><i class="fa fa-check"></i><b>15</b> The Need for Optimization</a></li>
<li class="chapter" data-level="16" data-path="optim-caveat.html"><a href="optim-caveat.html"><i class="fa fa-check"></i><b>16</b> Common Application Caveats</a></li>
<li class="chapter" data-level="17" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html"><i class="fa fa-check"></i><b>17</b> Optimizing Shiny Code</a></li>
<li class="chapter" data-level="18" data-path="optimjs.html"><a href="optimjs.html"><i class="fa fa-check"></i><b>18</b> Using JavaScript</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://rtask.thinkr.fr">A book by the ThinkR team</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Production-Grade Shiny Apps</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stepbuild" class="section level1">
<h1><span class="header-section-number">Chapter 11</span> Building app with <code>{golem}</code></h1>
<p>Now that the application is prototyped inside a <code>{golem}</code> <span class="citation">(Guyader et al. <a href="#ref-R-golem" role="doc-biblioref">2020</a>)</span> skeleton, you can now work on the integration of the application.</p>
<p>This parts encompasses the integration of the back-end/front-end together, and working on the global engineering of the application, <em>i.e</em>:</p>
<ul>
<li>add and organize dependencies</li>
<li>creating and including sub-modules if necessary</li>
<li>organize utility functions and link them to the module they are used in</li>
<li>adding testing infrastructure</li>
<li>linking to CI / CD services</li>
<li>check</li>
</ul>
<div id="add-dependencies" class="section level2">
<h2><span class="header-section-number">11.1</span> Add dependencies</h2>
<p>When you are building a <code>{shiny}</code> <span class="citation">(Chang et al. <a href="#ref-R-shiny" role="doc-biblioref">2020</a>)</span> application, you will have to deal with dependencies.
Well, at least with one dependency, <code>{shiny}</code>.
But chances are that you will not only be using <code>{shiny}</code> inside your application: you will probably call functions from other packages, for example from <code>{ggplot2}</code> <span class="citation">(Wickham, Chang, et al. <a href="#ref-R-ggplot2" role="doc-biblioref">2020</a>)</span> for plotting, <code>{DT}</code> <span class="citation">(Xie, Cheng, and Tan <a href="#ref-R-DT" role="doc-biblioref">2020</a>)</span> for interactive tables, or any other packages that will be necessary to your application working.</p>
<p>If you are building your application using <code>{golem}</code>, you will have 3 default dependencies: <code>{golem}</code> itself, <code>{shiny}</code>, and <code>{config}</code>.
If you call <code>golem::use_recommended_deps()</code> in the first workflow script, you will also have <code>{shiny}</code>, <code>{DT}</code>, <code>{attempt}</code>, <code>{glue}</code>, <code>{htmltools}</code>, and <code>{golem}</code> as dependencies to your package.
The idea with this function is to provide a shortcut for adding commonly used dependencies, so that you don’t have to do it by hand.</p>
<p>But what about other dependencies like <code>{ggplot2}</code> or <code>{DT}</code>?
These ones need to be added by hand.
Every time you add a new dependency, go to the <code>dev/02_dev.R</code>, and call the <code>use_package()</code> function from <code>{usethis}</code>:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="stepbuild.html#cb125-1"></a>usethis<span class="op">::</span><span class="kw">use_package</span>(<span class="st">&quot;pkg.you.want.to.add&quot;</span>)</span></code></pre></div>
<p>There are two places where the dependencies of your application need to be managed<a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a>
: the <code>DESCRIPTION</code> file and the <code>NAMESPACE</code></p>
<ul>
<li><p>The <code>DESCRIPTION</code> file, which dictates what packages has to be installed when your application is installed.
As you can not install just a part of a package, this requirement in the <code>DESCRIPTION</code> implies that when installed, a Shiny App as a Package will install the dependency on the machine.
For example, if you list <code>{DT}</code> inside the <code>DESCRIPTION</code> file, the whole package will be installed when your app is installed.
What <code>use_package()</code> is doing is adding the package you have entered to the <code>DESCRIPTION</code>.</p></li>
<li><p>The <code>NAMESPACE</code>, which describe how your app interacts with the R session at run time, <em>i.e</em> when your application is launched.
What this <code>NAMESPACE</code> allows to do is to specify only a subset of functions from another package: for example you can choose here to import on <code>renderDT()</code> and <code>DTOutput()</code> from <code>{DT}</code>, instead of importing the whole package.
The idea with selected import from dependencies is that it allows to avoid namespace conflicts: if you remember correctly, we described a few chapters ago a namespace conflict occurring between <code>jsonlite::flatten()</code> and <code>purrr::flatten()</code><a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a>
: using a selective importation, <em>i.e</em> only importing the function we need from <code>{purrr}</code> and not the whole package will help us handle that.
To do so, we will need to do to every script that defines a function, and add a <code>{roxygen2}</code> <span class="citation">(Wickham, Danenberg, et al. <a href="#ref-R-roxygen2" role="doc-biblioref">2020</a>)</span> tag, in the following form : <code>#' @importFrom purrr map map_df partial</code>.
Note that you can also use explicit namespacing, <em>i.e</em> the <code>pkg::function()</code> notation inside your code.</p></li>
</ul>
<p>Also, if you need a little help to indentify dependencies, all the explicitly namespaced calls (<code>pkg::function()</code>) can be scraped using the <code>{attachment}</code> <span class="citation">(Guyader and Rochette <a href="#ref-R-attachment" role="doc-biblioref">2020</a>)</span> package:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="stepbuild.html#cb126-1"></a>attachment<span class="op">::</span><span class="kw">att_from_rscripts</span>()</span></code></pre></div>
<p>If you are using a development package (for example one installed from GitHub), you can add it to the <code>DESCRIPTION</code> using the <code>use_dev_package()</code> from <code>{usethis}</code>.
This will add another field to the <code>DESCRIPTION</code> file, <code>Remotes</code>, with the location where the package is available.</p>
<p>All of this can seem a little bit daunting at first, but that is for the best:</p>
<blockquote>
<p>Having a high quality namespace helps encapsulate your package and makes it self-contained. This ensures that other packages won’t interfere with your code, that your code won’t interfere with other packages, and that your package works regardless of the environment in which it’s run.</p>
</blockquote>
<p><em>R Packages</em>, <span class="citation">(Wickham and Bryan <a href="#ref-rpkg" role="doc-biblioref">2020</a><a href="#ref-rpkg" role="doc-biblioref">a</a>)</span></p>
<p>To learn more about the details of dependencies, <code>DESCRIPTION</code> and <code>NAMESPACE</code>, here are some resources:</p>
<ul>
<li><a href="https://cran.r-project.org/manuals.html">Writing R Extensions</a>, the official manual from the R-Core team</li>
<li><a href="https://r-pkgs.org/">R Packages</a>, especially the <em>Package metadata</em> and <em>Namespace</em></li>
</ul>
</div>
<div id="submodules-and-utility-functions" class="section level2">
<h2><span class="header-section-number">11.2</span> Submodules and utility functions</h2>
<p>When building a large application, you will be splitting your code base into smaller pieces: we have defined in the <em>Structuring your Project</em> chapter that these utilitarian functions should be defined in files that are prefixed with a specific term.
In the <code>{golem}</code> world, <code>utils_*</code> files contain small functions that might be used several times in the application, and the <code>fct_*</code> files larger functions that are more central to the application.</p>
<p>Two functions can be called to add these files:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="stepbuild.html#cb127-1"></a>golem<span class="op">::</span><span class="kw">add_fct</span>( <span class="st">&quot;helpers&quot;</span> ) </span>
<span id="cb127-2"><a href="stepbuild.html#cb127-2"></a>golem<span class="op">::</span><span class="kw">add_utils</span>( <span class="st">&quot;helpers&quot;</span> )</span></code></pre></div>
<ul>
<li>The first will create a <code>R/fct_helpers.R</code> file</li>
<li>The second will create a <code>R/utils_helpers.R</code> file</li>
</ul>
<p>The idea, as explained before, is that as soon as you open a <code>{golem}</code> based project, you are able to identify what the files contain.</p>
<p>The <code>utils_*</code> convention is a pretty common one: a lot of R packages contain a file call <code>utils.R</code> that bundles a series of small functions that are used throughout the package.
For example, the <code>{hexmake}</code> app has two of these files <a href="https://github.com/ColinFay/hexmake/blob/master/R/utils_ui.R"><code>R/utils_ui.R</code></a> and <a href="https://github.com/ColinFay/hexmake/blob/master/R/utils_server.R"><code>R/utils_server.R</code></a>, in which you will find small functions that are reused throughout the app.</p>
<p>The <code>fct_*</code> files are to be used with larger functions, which are more central to the application, but that might not fit into a specific module.
For example, in <code>{hexmake}</code>, you will find <a href="https://github.com/ColinFay/hexmake/blob/master/R/fct_mongo.R"><code>R/fct_mongo.R</code></a>, that is used to handle all the things related to connecting and interacting with the Mongodb database.</p>
<p>As you can see, the difference is that <code>fct_*</code> file are more “topic-centric”, in the sense that they gather functions that relates to a specific feature of the application (here, the database), while <code>utils_*</code> files are more used as a place where to put functions that might not relate to each other.</p>
<p>Note that when building a module with <code>golem::add_module()</code>, you can add a module specific <code>fct_*</code> or <code>utils_*</code> file:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="stepbuild.html#cb128-1"></a>golem<span class="op">::</span><span class="kw">add_module</span>(<span class="st">&quot;rendering&quot;</span>, <span class="dt">fct =</span> <span class="st">&quot;connect&quot;</span>, <span class="dt">utils =</span> <span class="st">&quot;wrapper&quot;</span>)</span></code></pre></div>
<p>Will create:</p>
<ul>
<li><code>R/mod_rendering.R</code></li>
<li><code>R/mod_rendering_fct_connect.R</code></li>
<li><code>R/mod_rendering_utils_wrapper.R</code></li>
</ul>
<p>And this can also be done the other way around, by specifying the module you want to link your file to:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="stepbuild.html#cb129-1"></a>golem<span class="op">::</span><span class="kw">add_utils</span>(<span class="st">&quot;wrapper&quot;</span>, <span class="dt">module =</span> <span class="st">&quot;rendering&quot;</span>)</span></code></pre></div>
</div>
<div id="add-tests" class="section level2">
<h2><span class="header-section-number">11.3</span> Add tests</h2>
<p>No piece of software should go into production if it has not been sufficiently tested.
In this part of the building process, you will be setting tests for the application you are building.
We will get back to the how, why and what of testing in an upcoming chapter, but as we are currently going through the <code>02_dev.R</code> script, we mention here the line that allows you to add a test skeleton to your app.</p>
<p>If you have followed every steps from the <code>01_start.R</code> file, you already have a full testing infrastructure ready, with a set of recommended tests inserted by <code>{golem}</code>.
But as it is hard to find tests that are relevant to all applications (as every application is unique), you will have to add and fill manually the tests that will check your app.
And right now, to add a new testing file, you can call:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="stepbuild.html#cb130-1"></a>usethis<span class="op">::</span><span class="kw">use_test</span>(<span class="st">&quot;app&quot;</span>)</span></code></pre></div>
<p>More on testing in the <em>Build yourself a safety net</em> chapter.</p>
</div>
<div id="documentation-and-code-coverage" class="section level2">
<h2><span class="header-section-number">11.4</span> Documentation and Code Coverage</h2>
<div id="vignette" class="section level3">
<h3><span class="header-section-number">11.4.1</span> Vignette</h3>
<p>Vignettes are longer format documentation for your application, they are the one users see when they are running <code>browseVignettes()</code>, when they look at the documentation in the <code>Help</code> pane from RStudio, when they are browsing a webpage on CRAN, and it is also the documents that are used when the <code>{pkgdown}</code> websites are built.
The good news is that if you have been using our “Rmd first” method, you already have most of the Vignettes built: they are the Markdown files describing how the back-end of your application works.</p>
<p>Depending on how you applied this principle, these Rmd files might live inside the <code>inst/</code> folder, or already as package Vignettes.
If you need to add a new Vignette, be it for adding an Rmd describing the back-end or a global documentation about the application, you can call the <code>use_vignette()</code> function from <code>{usethis}</code>.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="stepbuild.html#cb131-1"></a>usethis<span class="op">::</span><span class="kw">use_vignette</span>(<span class="st">&quot;shinyexample&quot;</span>)</span></code></pre></div>
<p>Then, you can build all the Vignettes with:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="stepbuild.html#cb132-1"></a>devtools<span class="op">::</span><span class="kw">build_vignettes</span>()</span></code></pre></div>
</div>
<div id="code-coverage-ci" class="section level3">
<h3><span class="header-section-number">11.4.2</span> Code coverage &amp; CI</h3>
<p>Code coverage is a way to detect the volume of code that is covered by unit testing.
You can do this locally, or you can use online services like Appveyor, an online platform that computes and track the code coverage of your repository.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="stepbuild.html#cb133-1"></a>usethis<span class="op">::</span><span class="kw">use_travis</span>()</span>
<span id="cb133-2"><a href="stepbuild.html#cb133-2"></a>usethis<span class="op">::</span><span class="kw">use_appveyor</span>()</span>
<span id="cb133-3"><a href="stepbuild.html#cb133-3"></a>usethis<span class="op">::</span><span class="kw">use_coverage</span>()</span></code></pre></div>
</div>
</div>
<div id="using-golem-dev-functions" class="section level2">
<h2><span class="header-section-number">11.5</span> Using <code>{golem}</code> dev functions</h2>
<p>There is a series of tools to make your app behave differently whether it is in dev or prod mode.
Notably, the <code>app_prod()</code> and <code>app_dev()</code> function look for the value of <code>options( "golem.app.prod" )</code>, or return TRUE if this option does not exist.</p>
<p>Setting this options at the beginning of your dev process allows to make your app behave in a specific way when you are in dev mode.
For example, printing message to the console with <code>cat_dev()</code>.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="stepbuild.html#cb134-1"></a><span class="kw">options</span>( <span class="st">&quot;golem.app.prod&quot;</span> =<span class="st"> </span><span class="ot">TRUE</span>)</span>
<span id="cb134-2"><a href="stepbuild.html#cb134-2"></a>golem<span class="op">::</span><span class="kw">cat_dev</span>(<span class="st">&quot;hey</span><span class="ch">\n</span><span class="st">&quot;</span>)</span>
<span id="cb134-3"><a href="stepbuild.html#cb134-3"></a><span class="kw">options</span>( <span class="st">&quot;golem.app.prod&quot;</span> =<span class="st"> </span><span class="ot">FALSE</span>)</span>
<span id="cb134-4"><a href="stepbuild.html#cb134-4"></a>golem<span class="op">::</span><span class="kw">cat_dev</span>(<span class="st">&quot;hey</span><span class="ch">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>hey</code></pre>
<p>You can then make any function being “dev-dependant” with the <code>make_dev()</code> function:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="stepbuild.html#cb136-1"></a>log_dev &lt;-<span class="st"> </span>golem<span class="op">::</span><span class="kw">make_dev</span>(log)</span>
<span id="cb136-2"><a href="stepbuild.html#cb136-2"></a><span class="kw">log_dev</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>[1] 2.303</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="stepbuild.html#cb138-1"></a><span class="kw">options</span>( <span class="st">&quot;golem.app.prod&quot;</span> =<span class="st"> </span><span class="ot">TRUE</span>)</span>
<span id="cb138-2"><a href="stepbuild.html#cb138-2"></a><span class="kw">log_dev</span>(<span class="dv">10</span>)</span></code></pre></div>

</div>
</div>



<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-shiny">
<p>Chang, Winston, Joe Cheng, JJ Allaire, Yihui Xie, and Jonathan McPherson. 2020. <em>Shiny: Web Application Framework for R</em>. <a href="https://CRAN.R-project.org/package=shiny">https://CRAN.R-project.org/package=shiny</a>.</p>
</div>
<div id="ref-R-golem">
<p>Guyader, Vincent, Colin Fay, Sébastien Rochette, and Cervan Girard. 2020. <em>Golem: A Framework for Robust Shiny Applications</em>. <a href="https://github.com/ThinkR-open/golem">https://github.com/ThinkR-open/golem</a>.</p>
</div>
<div id="ref-R-attachment">
<p>Guyader, Vincent, and Sébastien Rochette. 2020. <em>Attachment: Deal with Dependencies</em>. <a href="https://CRAN.R-project.org/package=attachment">https://CRAN.R-project.org/package=attachment</a>.</p>
</div>
<div id="ref-rpkg">
<p>Wickham, Hadley, and Jennifer Bryan. 2020a. <em>R Packages</em>. <a href="https://r-pkgs.org/">https://r-pkgs.org/</a>.</p>
</div>
<div id="ref-R-ggplot2">
<p>Wickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, and Dewey Dunnington. 2020. <em>Ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics</em>. <a href="https://CRAN.R-project.org/package=ggplot2">https://CRAN.R-project.org/package=ggplot2</a>.</p>
</div>
<div id="ref-R-roxygen2">
<p>Wickham, Hadley, Peter Danenberg, Gábor Csárdi, and Manuel Eugster. 2020. <em>Roxygen2: In-Line Documentation for R</em>. <a href="https://CRAN.R-project.org/package=roxygen2">https://CRAN.R-project.org/package=roxygen2</a>.</p>
</div>
<div id="ref-R-DT">
<p>Xie, Yihui, Joe Cheng, and Xianying Tan. 2020. <em>DT: A Wrapper of the Javascript Library ’Datatables’</em>. <a href="https://CRAN.R-project.org/package=DT">https://CRAN.R-project.org/package=DT</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="32">
<li id="fn32"><p>This is not <code>{shiny}</code> nor <code>{golem}</code> specific, but a requirerment for any package<a href="stepbuild.html#fnref32" class="footnote-back">↩︎</a></p></li>
<li id="fn33"><p>which can be pretty common as <code>{jsonlite}</code> might import <code>JSON</code> files as list, and <code>{purrr}</code> has pretty powerful tools for manipulating lists<a href="stepbuild.html#fnref33" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<hr/>
<footer>
<a href="rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"/></a>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="stepprotopype.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="step-secure.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ThinkR-open/building-shiny-apps-workflow/edit/master/11-step-by-step-build.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
