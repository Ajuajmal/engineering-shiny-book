<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 About Successful Shiny Apps | Engineering Production-Grade Shiny Apps</title>
  <meta name="description" content="Chapter 1 About Successful Shiny Apps | Engineering Production-Grade Shiny Apps" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 About Successful Shiny Apps | Engineering Production-Grade Shiny Apps" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 1 About Successful Shiny Apps | Engineering Production-Grade Shiny Apps" />
  <meta name="github-repo" content="ThinkR-open/building-shiny-apps-workflow" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 About Successful Shiny Apps | Engineering Production-Grade Shiny Apps" />
  
  <meta name="twitter:description" content="Chapter 1 About Successful Shiny Apps | Engineering Production-Grade Shiny Apps" />
  

<meta name="author" content="Colin Fay, Sébastien Rochette, Vincent Guyader, Cervan Girard" />


<meta name="date" content="2020-04-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="index.html"/>
<link rel="next" href="planning.html"/>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149994171-1');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/thinkr.css" type="text/css" />
<link rel="stylesheet" href="css/style_gitbook.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Production-Grade Shiny Apps</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="part"><span><b>I Building Successful Shiny Apps</b></span></li>
<li class="chapter" data-level="1" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html"><i class="fa fa-check"></i><b>1</b> About Successful Shiny Apps</a></li>
<li class="chapter" data-level="2" data-path="planning.html"><a href="planning.html"><i class="fa fa-check"></i><b>2</b> Planning Ahead</a></li>
<li class="chapter" data-level="3" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>3</b> Structuring your Project</a></li>
<li class="chapter" data-level="4" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>4</b> Introduction to <code>{golem}</code></a></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> The workflow</a></li>
<li class="part"><span><b>II Step 1: Design</b></span></li>
<li class="chapter" data-level="6" data-path="matters.html"><a href="matters.html"><i class="fa fa-check"></i><b>6</b> UX Matters</a></li>
<li class="chapter" data-level="7" data-path="step-design.html"><a href="step-design.html"><i class="fa fa-check"></i><b>7</b> Don’t rush into coding</a></li>
<li class="chapter" data-level="8" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>8</b> A Gentle Introduction to CSS</a></li>
<li class="part"><span><b>III Step 2: Prototype</b></span></li>
<li class="chapter" data-level="9" data-path="setting-up-for-success-with-golem.html"><a href="setting-up-for-success-with-golem.html"><i class="fa fa-check"></i><b>9</b> Setting up for success with <code>{golem}</code></a></li>
<li class="chapter" data-level="10" data-path="stepprotopype.html"><a href="stepprotopype.html"><i class="fa fa-check"></i><b>10</b> Building an “ipsum-app”</a></li>
<li class="part"><span><b>IV Step 3: Build</b></span></li>
<li class="chapter" data-level="11" data-path="stepbuild.html"><a href="stepbuild.html"><i class="fa fa-check"></i><b>11</b> Building app with <code>{golem}</code></a></li>
<li class="part"><span><b>V Step 4: Strengthen</b></span></li>
<li class="chapter" data-level="12" data-path="step-secure.html"><a href="step-secure.html"><i class="fa fa-check"></i><b>12</b> Build yourself a safety net</a></li>
<li class="chapter" data-level="13" data-path="secure.html"><a href="secure.html"><i class="fa fa-check"></i><b>13</b> Version Control</a></li>
<li class="chapter" data-level="14" data-path="deploy-golem.html"><a href="deploy-golem.html"><i class="fa fa-check"></i><b>14</b> Deploy your application</a></li>
<li class="part"><span><b>VI Optimizing</b></span></li>
<li class="chapter" data-level="15" data-path="when-optimize.html"><a href="when-optimize.html"><i class="fa fa-check"></i><b>15</b> The Need for Optimization</a></li>
<li class="chapter" data-level="16" data-path="optim-caveat.html"><a href="optim-caveat.html"><i class="fa fa-check"></i><b>16</b> Common Application Caveats</a></li>
<li class="chapter" data-level="17" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html"><i class="fa fa-check"></i><b>17</b> Optimizing Shiny Code</a></li>
<li class="chapter" data-level="18" data-path="optimjs.html"><a href="optimjs.html"><i class="fa fa-check"></i><b>18</b> Using JavaScript</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://rtask.thinkr.fr">A book by the ThinkR team</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Production-Grade Shiny Apps</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="successfulshinyapp" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> About Successful Shiny Apps</h1>
<blockquote>
<p>I Too Like to Live Dangerously</p>
</blockquote>
<!--SHINY.SINGLETON[1efbbb1390b1f2da3adcc5776ac72d01ac3af14a]-->
<style>.right{ text-align: right;}</style>
<!--/SHINY.SINGLETON[1efbbb1390b1f2da3adcc5776ac72d01ac3af14a]-->
<div class="right">Austin Powers</div>
<div id="a-very-short-introduction-to-shiny" class="section level2">
<h2><span class="header-section-number">1.1</span> A (very) short introduction to Shiny</h2>
<p>If you are reading this page, chances are you already know what a Shiny application (shorten “Shiny app”) is—a web application that communicates with R, built in R, and working with R.
The beauty of <code>{shiny}</code> <span class="citation">(Chang et al. <a href="#ref-R-shiny" role="doc-biblioref">2020</a>)</span> is that it makes it easy for someone already familiar with R to create a small app in a matter of hours.
With small and minimal Shiny apps, no knowledge of HTML, CSS or JavaScript is required, and you do not have to think about technical elements that usually come with web applications—for example, you do not have to think about the port the application is served on: <code>{shiny}</code> picks one for you<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.
Same goes for serving external dependencies: the application comes with its set of CSS and JavaScript dependencies that a common Shiny developer does not need to worry about.
And that is probably one of the main reason why this package has become so successful over the years—with very little training, you can rapidly create a proof-of-concept (PoC) for a data-product, showcase an algorithm, or present your results in an elegant and accessible user interface.</p>
<p>The first version of <code>{shiny}</code> was published in 2012.
Since then, it has been one of the top project of the RStudio team.
At the time of writing these lines (April 2020), there are more than 4700 commits in the master branch of the GitHub repository, made by 46 contributors.
It is now downloaded around 400K times a month, according to <a href="https://cranlogs.r-pkg.org/badges/shiny">cranlogs</a>, and has 733 reverse dependencies (i.e packages that depend on it), according to <code>devtools::revdep("shiny")</code>.</p>
<p>If you are very new to Shiny, this book might feel a little bit overwhelming: we will be discussing some advance <code>{shiny}</code> production methods, best practices and structural idea for sending Shiny applications to production.
This books relies on the assumption that you already know how to build basic Shiny applications, and that you want to push your Shiny skills to the next level: in other words, you are ready to move from the Proof of Concept to the production-grade application.
If you are very new to Shiny, we suggest you start with the <a href="https://mastering-shiny.org/">Mastering Shiny book</a> before reading the present book.</p>
<p>Ready to start engineering production-grade Shiny Apps?</p>
</div>
<div id="complex-shiny" class="section level2">
<h2><span class="header-section-number">1.2</span> What is a complex Shiny Application?</h2>
<blockquote>
<p>One of the unfortunate things about reality is that it often poses complex problems that demand complex solutions</p>
</blockquote>
<!--SHINY.SINGLETON[1efbbb1390b1f2da3adcc5776ac72d01ac3af14a]-->
<style>.right{ text-align: right;}</style>
<!--/SHINY.SINGLETON[1efbbb1390b1f2da3adcc5776ac72d01ac3af14a]-->
<div class="right">
<a href="http://www.catb.org/~esr/writings/taoup/html/ch13s01.html">The Art of Unix Programming</a>
</div>
<div id="reaching-the-cliff-of-complexity" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Reaching the cliff of complexity</h3>
<p>Building a Shiny application seems quite straightforward when it comes to small prototypes or proof of concepts: after a few hours of practice and documentation reading, most R developers can have a small working application.<br />
But things change when your application reaches “the cliff of complexity”<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, <em>i.e</em> that moment when the application reaches a states when it can be qualified as “complex”.</p>
<p>But what do we mean by complexity?
Getting a clear definition is not an easy task<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
as it very much depends on who is concerned and who you are talking to.
But a good definition can be found in <em>The DevOps Handbook</em> <span class="citation">(<span class="citeproc-not-found" data-reference-id="genekim2016"><strong>???</strong></span>)</span> : <em>“One of the defining characteristics of a complex system is that it <strong>defies any single person’s ability to see the system as a whole and understand how all the pieces fit together</strong>. Complex system typically have a high degree of interconnectedness of tightly coupled components, and system-level behavior cannot be explained merely in terms of the behavior of the system components.”</em> (we underlined).</p>
<p>Building on top of this quote, let’s try to come up with a definition that will serve us in the context of engineering Shiny applications.</p>
<p>When building software, we can think of complexity from two points of view: the complexity as it is seen by the developer, and the complexity as it is seen by the customer/end-user.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<ul>
<li><p>For the code, bugs are harder to anticipate: it is hard to think about all the different paths the software can follow and difficult to identify bugs because they are deeply nested in the numerous routines the app is doing.
It is also hard to think about what the state of your app is at a given moment because of the numerous inputs and outputs your app contains.</p></li>
<li><p>From the user perspective, the more complex an app is, the steeper the learning curve.
Indeed, the user will have to invest more time learning how the app works, and will be even more disappointed if ever they realize this time has been a waste.</p></li>
</ul>
<p>Let’s dive a little bit more in these two type of complexity.</p>
<div id="developers-complexity" class="section level4">
<h4><span class="header-section-number">1.2.1.1</span> Developers complexity</h4>
<p>An app is to be considered complex when it is so large in terms of size and functionality that it makes it impossible to reason about it at once, and developer must rely on tools and methods to understand and handle this complexity: for example, when it comes to <code>{shiny}</code>, you will rely on tools like the <code>{golem}</code> framework, introduced all along this book, to handle some implementation, development and deployment complexity.
This book will introduce a clear methodology that comes with a series of conventions, which are crucial when it comes to building and maintaining complex systems: by imposing a formalized structure for a software, it enhances its readability, lower the learning curve for new-comers, and reduces the risk of errors inherent to repetitive tasks.</p>
<p>This type of complexity is called <em>implementation complexity</em>.
One of the goal of this book is to present you a methodology and toolkit that will help you reduce this form of complexity.</p>
</div>
<div id="customers-and-users-complexity" class="section level4">
<h4><span class="header-section-number">1.2.1.2</span> Customers and users complexity</h4>
<p>Customers and end user see complexity as <em>interface complexity</em>.</p>
<p>Interface complexity can be driven by a lot of elements, for example the probability of making an error while using the app, the difficulty to understand the logical progression in the app, the presence of unfamiliar behaviour or terms, visual distractions…
This book will also bring you strategy to help you cope with the need for simplification when it comes to designing interface.</p>
</div>
</div>
<div id="balancing-complexities" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Balancing complexities</h3>
<p>There is an inherent tension between these two source of complexity, as designing an app means finding a good balance between implementation and interface complexity.
Lowering one source of complexity usually means increasing the other, and managing an application project means knowing where to draw the line.
This usually requires restraining yourself from implementing too much features, and still create an application that is easy to use, and that fits the requirements you have received.</p>
<p>For example, there is something common in Shiny application: what we can call the “too much reactivity pattern”.
In some cases, developers try to make everything reactive: <em>e.g.</em>, three sliders and a dropdown input, all updating a single plot.
This behavior lowers the interface complexity: users do not have to really think about what they are doing, they move sliders, change the inputs, and boom! the plot updates.
But this kind of pattern can make the application perform too much computation, for example because users rarely go to the value they need on their first try: they usually miss what value they actually want to select.</p>
<p>One solution can be to delay reactivity or to cache things so that R computes fewer things.
But that comes with a cost: handling delayed reactivity and caching elements increases implementation complexity.
Another solution is to add an “update plot” button, which updates the plot only when the user clicks on it.
This pattern makes it easier to control reactivity from an implementation side.
But this can make the interface a little bit more complex for the users, who have to perform another action, on top of changing their inputs.<br />
We will argue somewhere else in the book that not enough reactivity is better than too much reactivity, as the latter increases computation time, and relies on the assumption that the user makes the right action on the first try.</p>
<p>Another good example is <code>{shiny}</code>’s <code>dateRangeInput()</code> function.
This function requires the user to choose a starting date and an ending date.
However, the function allows to choose a start date which is posterior to the end (that is the behavior of the JavaScript plugin used in <code>{shiny}</code> to create this input).
But allowing this behavior leads to bugs, notably in a context of full reactivity.
Handling this special case is completely doable: with a little bit of craft, you can watch what the user inputs and throw an error if the start is after the end.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>
On one hand that solution increases implementation complexity, while on the other leaving this naive behavior requires the user to think carefully about what they are selecting, thus increasing the interface complexity.</p>
<p>So what should we do?
It’s up to you: deciding where to draw the line between interface &amp; implementation complexity very much depends of the project, but that is something that you should keep in mind all along the project’s life.</p>
</div>
<div id="assessing-code-complexity" class="section level3">
<h3><span class="header-section-number">1.2.3</span> Assessing Code Complexity</h3>
<p>On the developer side, you will want to reduce code complexity so that everybody involved in the coding process is able to create a mental model of how the application work.
On the user side, you will want to reduce interface complexity so that everybody comes out of using your application with a good user-experience.</p>
<p>Reducing complexity first comes with being able to identify its potential sources, be it in your application code base or in the specifications describing how the application should work.
Finding these sources of complexity is not an easy task, as it requires some programming knowledge to identify bottlenecks, basic UX (User Experience) skills to implement a good interface, and of course a project management methodology to structure the whole life of your application.</p>
<p>All these points will be addressed in this book.
But before that, let’s dive into code complexity.</p>
<div id="codebase-size" class="section level4">
<h4><span class="header-section-number">1.2.3.1</span> Codebase size</h4>
<p>The total number of lines of code, or the number of files, can be good clue of potential complexity, but only if used as order ofs magnitude (for example a 10.000-line codebase is potentially more complex than a 100-line codebase), but should not be relied on if used strictly: even more if you try to reduce this number of line by sacrificing code readability.</p>
<p>R is very permissive when it comes to indentation and line breaks, and, unlike JavaScript or CSS, it is generally not minified<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>.<br />
In R, the number of lines of code depends on your coding style and the packages you are using.
For example, the <code>{tidyverse}</code> <span class="citation">(<span class="citeproc-not-found" data-reference-id="tidyverse2019"><strong>???</strong></span>)</span> style guide encourage the use of the pipe (<code>%&gt;%</code>)<br />
<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a><br />
with one function by line, producing more lines in the end code.
So you can expect a “tidyverse-centric” package to contain more line of code, yet the pipe itself has been thought as a tool to lower code complexity by enhancing its readability<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>.
For example, the two following pieces of code do the same thing.
Both have a different number of lines, and a different level of reading complexity.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="successfulshinyapp.html#cb5-1"></a><span class="kw">library</span>(dplyr, <span class="dt">warn.conflicts =</span> <span class="ot">FALSE</span>)</span>
<span id="cb5-2"><a href="successfulshinyapp.html#cb5-2"></a><span class="co"># With pipe</span></span>
<span id="cb5-3"><a href="successfulshinyapp.html#cb5-3"></a>iris <span class="op">%&gt;%</span></span>
<span id="cb5-4"><a href="successfulshinyapp.html#cb5-4"></a><span class="st">  </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span></span>
<span id="cb5-5"><a href="successfulshinyapp.html#cb5-5"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">m_sp =</span> <span class="kw">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>[90m# A tibble: 3 x 2[39m
  Species     m_sp
  [3m[90m&lt;fct&gt;[39m[23m      [3m[90m&lt;dbl&gt;[39m[23m
[90m1[39m setosa      5.01
[90m2[39m versicolor  5.94
[90m3[39m virginica   6.59</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="successfulshinyapp.html#cb7-1"></a><span class="co"># Without</span></span>
<span id="cb7-2"><a href="successfulshinyapp.html#cb7-2"></a><span class="kw">summarize</span>(<span class="kw">group_by</span>(iris, Species), <span class="dt">m_sp =</span> <span class="kw">mean</span>(Sepal.Length))</span></code></pre></div>
<pre><code>[90m# A tibble: 3 x 2[39m
  Species     m_sp
  [3m[90m&lt;fct&gt;[39m[23m      [3m[90m&lt;dbl&gt;[39m[23m
[90m1[39m setosa      5.01
[90m2[39m versicolor  5.94
[90m3[39m virginica   6.59</code></pre>
<p>Also, there is also no limit in the way you can indent your code.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="successfulshinyapp.html#cb9-1"></a>iris[</span>
<span id="cb9-2"><a href="successfulshinyapp.html#cb9-2"></a>  <span class="dv">1</span></span>
<span id="cb9-3"><a href="successfulshinyapp.html#cb9-3"></a>  <span class="op">:</span></span>
<span id="cb9-4"><a href="successfulshinyapp.html#cb9-4"></a><span class="st">    </span><span class="dv">5</span>, </span>
<span id="cb9-5"><a href="successfulshinyapp.html#cb9-5"></a>  <span class="st">&quot;Species&quot;</span></span>
<span id="cb9-6"><a href="successfulshinyapp.html#cb9-6"></a>]</span></code></pre></div>
<pre><code>[1] setosa setosa setosa setosa setosa
Levels: setosa versicolor virginica</code></pre>
<p>Six lines of code for something that could also be written in one line.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="successfulshinyapp.html#cb11-1"></a>iris[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="st">&quot;Species&quot;</span>]</span></code></pre></div>
<pre><code>[1] setosa setosa setosa setosa setosa
Levels: setosa versicolor virginica</code></pre>
<p>In other words, using this kind of writing style can make the code base larger in term of lines, without really adding complexity to the general program.</p>
<p>Another drawback of this metric is that it focuses on numbers instead of readability, and in the long run, yes, readability matters
As noted in <em>The Art of Unix Programming</em> <span class="citation">(Raymond <a href="#ref-ericraymond2003" role="doc-biblioref">2003</a>)</span>, “Chapter 13: Speaking of Complexity”, “<em>Pressure to keep the codebase size down by using extremely dense and complicated implementation techniques can cause a cascade of implementation complexity in the system, leading to an un-debuggable mess</em>”.</p>
<p>Still, this metric can be useful to reinforce what you have learned from other metrics.
It is rather unlikely that you will find this “extreme” coding style we showed above, and even if it might not make sense to compare two code base that just differ by 1 or 2 % of lines of code, it is very likely that a code base which is ten, one hundred, one thousand times larger is a more complex software.</p>
<p>Another good metric related to this metric is the number of files in the project: R developers tend to split their functions into several files, so the more files you will find in a project, the larger the code base is.
And numerous files can also be a sign of maintenance complexity, as it may be harder to reason about an app logic split into several files than about something that fits into one linear code inside one file<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>.
On the other hand, one big 10.000-lines file which is standing alone in the project is not a good sign either.</p>
<p>If you want to use the number of lines metric, you can do it from R with the <code>{cloc}</code> <span class="citation">(Rudis and Danial <a href="#ref-R-cloc" role="doc-biblioref">2020</a>)</span> package, available at <a href="https://github.com/hrbrmstr/cloc" class="uri">https://github.com/hrbrmstr/cloc</a>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="successfulshinyapp.html#cb13-1"></a><span class="cf">if</span> (<span class="op">!</span><span class="kw">requireNamespace</span>(<span class="st">&quot;cloc&quot;</span>)){</span>
<span id="cb13-2"><a href="successfulshinyapp.html#cb13-2"></a>  remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;hrbrmstr/cloc&quot;</span>)</span>
<span id="cb13-3"><a href="successfulshinyapp.html#cb13-3"></a>}</span></code></pre></div>
<p>For example, let’s compare a rather big package (<code>{shiny}</code>) with a small one (<code>{attempt}</code> <span class="citation">(Fay <a href="#ref-R-attempt" role="doc-biblioref">2019</a><a href="#ref-R-attempt" role="doc-biblioref">a</a>)</span>):</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="successfulshinyapp.html#cb14-1"></a><span class="kw">library</span>(cloc)</span>
<span id="cb14-2"><a href="successfulshinyapp.html#cb14-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb14-3"><a href="successfulshinyapp.html#cb14-3"></a>shiny_cloc &lt;-<span class="st"> </span><span class="kw">cloc_cran</span>(<span class="st">&quot;shiny&quot;</span>, <span class="dt">.progress =</span> <span class="ot">FALSE</span>, <span class="dt">repos =</span> <span class="st">&quot;http://cran.irsn.fr/&quot;</span> )</span>
<span id="cb14-4"><a href="successfulshinyapp.html#cb14-4"></a>attempt_cloc &lt;-<span class="st"> </span><span class="kw">cloc_cran</span>(<span class="st">&quot;attempt&quot;</span>, <span class="dt">.progress =</span> <span class="ot">FALSE</span>, <span class="dt">repos =</span> <span class="st">&quot;http://cran.irsn.fr/&quot;</span> )</span>
<span id="cb14-5"><a href="successfulshinyapp.html#cb14-5"></a>clocs &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(</span>
<span id="cb14-6"><a href="successfulshinyapp.html#cb14-6"></a>  shiny_cloc, </span>
<span id="cb14-7"><a href="successfulshinyapp.html#cb14-7"></a>  attempt_cloc</span>
<span id="cb14-8"><a href="successfulshinyapp.html#cb14-8"></a>)</span>
<span id="cb14-9"><a href="successfulshinyapp.html#cb14-9"></a></span>
<span id="cb14-10"><a href="successfulshinyapp.html#cb14-10"></a><span class="co"># Counting lines of code</span></span>
<span id="cb14-11"><a href="successfulshinyapp.html#cb14-11"></a>clocs <span class="op">%&gt;%</span></span>
<span id="cb14-12"><a href="successfulshinyapp.html#cb14-12"></a><span class="st">  </span><span class="kw">group_by</span>(pkg) <span class="op">%&gt;%</span></span>
<span id="cb14-13"><a href="successfulshinyapp.html#cb14-13"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb14-14"><a href="successfulshinyapp.html#cb14-14"></a>    <span class="dt">loc =</span> <span class="kw">sum</span>(loc)</span>
<span id="cb14-15"><a href="successfulshinyapp.html#cb14-15"></a>  )</span></code></pre></div>
<pre><code>[90m# A tibble: 2 x 2[39m
  pkg       loc
  [3m[90m&lt;chr&gt;[39m[23m   [3m[90m&lt;int&gt;[39m[23m
[90m1[39m attempt  [4m4[24m011
[90m2[39m shiny   [4m7[24m[4m1[24m493</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="successfulshinyapp.html#cb16-1"></a><span class="co"># Counting files</span></span>
<span id="cb16-2"><a href="successfulshinyapp.html#cb16-2"></a>clocs <span class="op">%&gt;%</span></span>
<span id="cb16-3"><a href="successfulshinyapp.html#cb16-3"></a><span class="st">  </span><span class="kw">group_by</span>(pkg) <span class="op">%&gt;%</span></span>
<span id="cb16-4"><a href="successfulshinyapp.html#cb16-4"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb16-5"><a href="successfulshinyapp.html#cb16-5"></a>    <span class="dt">files =</span> <span class="kw">sum</span>(file_count)</span>
<span id="cb16-6"><a href="successfulshinyapp.html#cb16-6"></a>  )</span></code></pre></div>
<pre><code>[90m# A tibble: 2 x 2[39m
  pkg     files
  [3m[90m&lt;chr&gt;[39m[23m   [3m[90m&lt;int&gt;[39m[23m
[90m1[39m attempt    35
[90m2[39m shiny     269</code></pre>
<p>Here, with these two metrics, we can safely assume that <code>{shiny}</code> is a more complex package than <code>{attempt}</code>.</p>
</div>
<div id="cyclomatic-complexity" class="section level4">
<h4><span class="header-section-number">1.2.3.2</span> Cyclomatic complexity</h4>
<p>Cyclomatic complexity is a software engineering measure which allows to define the number of different linear paths a piece of code can take.
The higher the number of paths, the harder it can be to have a clear mental model ot this function.</p>
<p>Cyclomatic complexity is computed based on a control-flow graph<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> representation of an algorithm.</p>
<p><img src="img/controlflow.png" /></p>
<p><em>(The following paragraph details the algorithm implementation, feel free to skip it)</em>
The complexity number is then computed by taking the number of nodes, subtracting the number of edges, plus two times the number of connected components of this graph.
The algorithm is then <span class="math inline">\(M = E − N + 2P\)</span>, where <span class="math inline">\(M\)</span> is the measure, <span class="math inline">\(E\)</span> the number of edges, <span class="math inline">\(N\)</span> the number of nodes and <span class="math inline">\(2P\)</span> is 2 time the number of connected components.
We will not go deep into this topic, as there are a lot things going on in this computation and you can find many documentation about this online.
Please refer to the bibliography for further readings about the theory behind this measurement.</p>
<p>In R, the cyclomatic complexity can be computed using the <code>{cyclocomp}</code> <span class="citation">(Csardi <a href="#ref-R-cyclocomp" role="doc-biblioref">2016</a>)</span> package.
You can get it from <code>CRAN</code> with:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="successfulshinyapp.html#cb18-1"></a><span class="kw">install.packages</span>(<span class="st">&quot;cyclocomp&quot;</span>)</span></code></pre></div>
<p>The <code>{cyclocomp}</code> package comes with three main functions: <code>cyclocomp()</code>, <code>cyclocomp_package()</code>, and <code>cyclocomp_package_dir()</code>.
The one we will be interested in is <code>cyclocomp_package_dir()</code>: building successful shiny apps with the <code>{golem}</code> framework (we will get back on that later) means you will be building your app as a package.
Then, you will be able to use <code>cyclocomp_package_dir()</code> to compute the complexity of your app.
Here is for example the cyclomatic complexity of the default golem template:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="successfulshinyapp.html#cb19-1"></a><span class="kw">library</span>(cyclocomp)</span>
<span id="cb19-2"><a href="successfulshinyapp.html#cb19-2"></a><span class="kw">cyclocomp_package</span>(<span class="st">&quot;golex&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</span></code></pre></div>
<pre><code>                          name cyclocomp
1                   app_server         1
2                       app_ui         1
3 golem_add_external_resources         1
4                      run_app         1</code></pre>
<p>And the one from another small application:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="successfulshinyapp.html#cb21-1"></a><span class="kw">cyclocomp_package</span>(<span class="st">&quot;tidytuesday201942&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</span></code></pre></div>
<pre><code>                  name cyclocomp
24      mod_dataviz_ui         8
23  mod_dataviz_server         7
35                  rv         6
14             display         4
39           undisplay         4
37 tagRemoveAttributes         3</code></pre>
<p>And, finally, the one for <code>{shiny}</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="successfulshinyapp.html#cb23-1"></a><span class="kw">cyclocomp_package</span>(<span class="st">&quot;shiny&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</span></code></pre></div>
<pre><code>                       name cyclocomp
494                  untar2        75
115            diagnoseCode        54
389                  runApp        50
150 find_panel_info_non_api        37
371             renderTable        37
102          dataTablesJSON        34</code></pre>
<p>And, bonus, this <code>cyclocomp_package()</code> function can also be used to retrieve the number of functions inside the package.</p>
<p>So, as The Clash said, “what are we gonna do now?”
You might have heard this saying: “if you copy and paste a piece of code twice, you should write a function”.
And indeed, splitting code into smaller pieces lower the local cyclomatic complexity, as smaller functions have lower cyclomatic complexity, but that is just at a local level, and it can be a suboptimal option: having a very large number of functions can make it harder to navigate in the codebase.</p>
<p>But that is not a magic solution: (A) because the global complexity of the app is not lowered by splitting things into pieces (just local complexity), (B) because the deeper the call stack, the harder it can be to debug.</p>
</div>
<div id="other-measures-for-code-complexity" class="section level4">
<h4><span class="header-section-number">1.2.3.3</span> Other measures for code complexity</h4>
<p>Complexity can come from other sources: insufficient code coverage, dependencies that breaks the implementation, relying on old packages, or a lot of other things.</p>
<p>We can use the <code>{packageMetrics2}</code> <span class="citation">(Csardi <a href="#ref-R-packageMetrics2" role="doc-biblioref">2020</a>)</span> package to get some of these metrics: for example, the number of dependencies, the code coverage, the number of releases and the date of the last one, etc., … and the number of lines of code and the cyclomatic complexity.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="successfulshinyapp.html#cb25-1"></a><span class="kw">library</span>(packageMetrics2)</span>
<span id="cb25-2"><a href="successfulshinyapp.html#cb25-2"></a>frame_metric &lt;-<span class="st"> </span><span class="cf">function</span>(pkg){</span>
<span id="cb25-3"><a href="successfulshinyapp.html#cb25-3"></a>  metrics &lt;-<span class="st"> </span><span class="kw">package_metrics</span>(pkg)</span>
<span id="cb25-4"><a href="successfulshinyapp.html#cb25-4"></a>  tibble<span class="op">::</span><span class="kw">tibble</span>(</span>
<span id="cb25-5"><a href="successfulshinyapp.html#cb25-5"></a>    <span class="dt">n =</span> <span class="kw">names</span>(metrics), </span>
<span id="cb25-6"><a href="successfulshinyapp.html#cb25-6"></a>    <span class="dt">val =</span> metrics, </span>
<span id="cb25-7"><a href="successfulshinyapp.html#cb25-7"></a>    <span class="dt">expl =</span> <span class="kw">list_package_metrics</span>()[<span class="kw">names</span>(metrics)]</span>
<span id="cb25-8"><a href="successfulshinyapp.html#cb25-8"></a>  )</span>
<span id="cb25-9"><a href="successfulshinyapp.html#cb25-9"></a>}</span></code></pre></div>
<p><em>{golem}</em></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="successfulshinyapp.html#cb26-1"></a><span class="kw">frame_metric</span>(<span class="st">&quot;golem&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">n</th>
<th align="left">val</th>
<th align="left">expl</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ARR</td>
<td align="left">0</td>
<td align="left">Number of times = is used for assignment</td>
</tr>
<tr class="even">
<td align="left">ATC</td>
<td align="left">85.1549755301794</td>
<td align="left">Author Test Coverage</td>
</tr>
<tr class="odd">
<td align="left">DWL</td>
<td align="left">8417</td>
<td align="left">Number of Downloads</td>
</tr>
<tr class="even">
<td align="left">DEP</td>
<td align="left">27</td>
<td align="left">Num of Dependencies</td>
</tr>
<tr class="odd">
<td align="left">DPD</td>
<td align="left">1</td>
<td align="left">Number of Reverse-Dependencies</td>
</tr>
<tr class="even">
<td align="left">CCP</td>
<td align="left">2.44444444444444</td>
<td align="left">Cyclomatic Complexity</td>
</tr>
<tr class="odd">
<td align="left">FLE</td>
<td align="left">3.08991228070175</td>
<td align="left">Average number of code lines per function</td>
</tr>
<tr class="even">
<td align="left">FRE</td>
<td align="left">2019-08-05T14:50:02+00:00</td>
<td align="left">Date of First Release</td>
</tr>
<tr class="odd">
<td align="left">LIB</td>
<td align="left">0</td>
<td align="left">Number of library and require calls</td>
</tr>
<tr class="even">
<td align="left">LLE</td>
<td align="left">40</td>
<td align="left">Number of code lines longer than 80 characters</td>
</tr>
<tr class="odd">
<td align="left">LNC</td>
<td align="left">0</td>
<td align="left">Number of lines of compiled code</td>
</tr>
<tr class="even">
<td align="left">LNR</td>
<td align="left">1464</td>
<td align="left">Number of lines of R code</td>
</tr>
<tr class="odd">
<td align="left">LRE</td>
<td align="left">2019-08-05T14:50:02+00:00</td>
<td align="left">Date of Last Release</td>
</tr>
<tr class="even">
<td align="left">NAT</td>
<td align="left">0</td>
<td align="left">Number of attach and detach calls</td>
</tr>
<tr class="odd">
<td align="left">NTF</td>
<td align="left">0</td>
<td align="left">Number of times T/F is used instead of TRUE/FALSE</td>
</tr>
<tr class="even">
<td align="left">NUP</td>
<td align="left">0</td>
<td align="left">Updates During the Last 6 Months</td>
</tr>
<tr class="odd">
<td align="left">OGH</td>
<td align="left">1</td>
<td align="left">Whether the package is on GitHub</td>
</tr>
<tr class="even">
<td align="left">SAP</td>
<td align="left">1</td>
<td align="left">Number of sapply calls</td>
</tr>
<tr class="odd">
<td align="left">SEM</td>
<td align="left">0</td>
<td align="left">Number of trailing semicolons in the code</td>
</tr>
<tr class="even">
<td align="left">SEQ</td>
<td align="left">0</td>
<td align="left">Number of 1:length(vec) expressions</td>
</tr>
<tr class="odd">
<td align="left">SWD</td>
<td align="left">18</td>
<td align="left">Number of setwd calls</td>
</tr>
<tr class="even">
<td align="left">VIG</td>
<td align="left">0</td>
<td align="left">Number of vignettes</td>
</tr>
</tbody>
</table>
<p><em>{shiny}</em></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="successfulshinyapp.html#cb27-1"></a><span class="kw">frame_metric</span>(<span class="st">&quot;shiny&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>knitr<span class="op">::</span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">n</th>
<th align="left">val</th>
<th align="left">expl</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ARR</td>
<td align="left">14</td>
<td align="left">Number of times = is used for assignment</td>
</tr>
<tr class="even">
<td align="left">ATC</td>
<td align="left">29.2341145204156</td>
<td align="left">Author Test Coverage</td>
</tr>
<tr class="odd">
<td align="left">DWL</td>
<td align="left">12238097</td>
<td align="left">Number of Downloads</td>
</tr>
<tr class="even">
<td align="left">DEP</td>
<td align="left">22</td>
<td align="left">Num of Dependencies</td>
</tr>
<tr class="odd">
<td align="left">DPD</td>
<td align="left">722</td>
<td align="left">Number of Reverse-Dependencies</td>
</tr>
<tr class="even">
<td align="left">CCP</td>
<td align="left">3.70817843866171</td>
<td align="left">Cyclomatic Complexity</td>
</tr>
<tr class="odd">
<td align="left">FLE</td>
<td align="left">2.34588807785888</td>
<td align="left">Average number of code lines per function</td>
</tr>
<tr class="even">
<td align="left">FRE</td>
<td align="left">2012-12-01T07:16:17+00:00</td>
<td align="left">Date of First Release</td>
</tr>
<tr class="odd">
<td align="left">LIB</td>
<td align="left">1</td>
<td align="left">Number of library and require calls</td>
</tr>
<tr class="even">
<td align="left">LLE</td>
<td align="left">495</td>
<td align="left">Number of code lines longer than 80 characters</td>
</tr>
<tr class="odd">
<td align="left">LNC</td>
<td align="left">0</td>
<td align="left">Number of lines of compiled code</td>
</tr>
<tr class="even">
<td align="left">LNR</td>
<td align="left">24737</td>
<td align="left">Number of lines of R code</td>
</tr>
<tr class="odd">
<td align="left">LRE</td>
<td align="left">2019-10-10T11:50:02+00:00</td>
<td align="left">Date of Last Release</td>
</tr>
<tr class="even">
<td align="left">NAT</td>
<td align="left">0</td>
<td align="left">Number of attach and detach calls</td>
</tr>
<tr class="odd">
<td align="left">NTF</td>
<td align="left">0</td>
<td align="left">Number of times T/F is used instead of TRUE/FALSE</td>
</tr>
<tr class="even">
<td align="left">NUP</td>
<td align="left">1</td>
<td align="left">Updates During the Last 6 Months</td>
</tr>
<tr class="odd">
<td align="left">OGH</td>
<td align="left">1</td>
<td align="left">Whether the package is on GitHub</td>
</tr>
<tr class="even">
<td align="left">SAP</td>
<td align="left">10</td>
<td align="left">Number of sapply calls</td>
</tr>
<tr class="odd">
<td align="left">SEM</td>
<td align="left">1</td>
<td align="left">Number of trailing semicolons in the code</td>
</tr>
<tr class="even">
<td align="left">SEQ</td>
<td align="left">0</td>
<td align="left">Number of 1:length(vec) expressions</td>
</tr>
<tr class="odd">
<td align="left">SWD</td>
<td align="left">6</td>
<td align="left">Number of setwd calls</td>
</tr>
<tr class="even">
<td align="left">VIG</td>
<td align="left">0</td>
<td align="left">Number of vignettes</td>
</tr>
</tbody>
</table>
<p>If you are building you Shiny application with <code>{golem}</code>, you can use the <code>DESCRIPTION</code> file, which contains the list of dependencies, as a starting point to explore these metrics for your dependencies:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="successfulshinyapp.html#cb28-1"></a>desc<span class="op">::</span><span class="kw">desc_get_deps</span>(<span class="st">&quot;golex/DESCRIPTION&quot;</span>)</span></code></pre></div>
<pre><code>     type package version
1 Imports  config       *
2 Imports   golem       *
3 Imports   shiny       *</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="successfulshinyapp.html#cb30-1"></a><span class="co"># See also </span></span>
<span id="cb30-2"><a href="successfulshinyapp.html#cb30-2"></a>attachment<span class="op">::</span><span class="kw">att_from_description</span>(<span class="st">&quot;golex/DESCRIPTION&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;config&quot; &quot;golem&quot;  &quot;shiny&quot; </code></pre>
</div>
</div>
<div id="production-grade-software-engineering" class="section level3">
<h3><span class="header-section-number">1.2.4</span> Production Grade Software Engineering</h3>
<p>The use of R has evolved since its initial version released in 1995, using it 25 years later, as a tool to build softwares released in production, is a challenge.
Complexity is still frowned upon by a lot of developers, notably because it has been seen as something to avoid according to the Unix philosophy.
But there are dozens of reasons why an app can become complex: for example, the question your app is answering is quite complicated and involves a lot of computation and routines.
The resulting app is rather ambitious and implements a lot of features, etc.
So yes, there is a chance that if you are reading this page, you are working or are planning to work on a complex Shiny app.
And this is not necessarily a bad thing!
Shiny apps can definitely be used to implement production-grade<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>
software, but production-grade software implies production-grade software engineering.
To make your project a success, you need to use tools that reduce the complexity of your app and ensure that your app is resilient to aging.</p>
<p>In other words, production-grade Shiny apps requires working with a software engineering mindset, which is not always an easy task in the R world: many R developers have learned this language as a tool for doing data analysis, building model, making statistics, not really as a tool for building software.
And still today, for a lot of R users, the software is still used as an “experimentation tool”, where production quality is one of the least concerns.
But the rise of <code>{shiny}</code> (among other packages) has drastically changed the potential of R as a language for production software engineering: its ease of use is also one of the reason why the language is now used outside academia, in more “traditional” software engineering teams.</p>
<p>This changing context requires different mindsets, skills, and tools.</p>
<p>With <code>{shiny}</code>, as we said before, it is quite easy to prototype a simple app, without any “hardcore” software engineering skills.
And when we are happy with our little proof of concept, we are tempted to add something new.
And another.
And another.
And without any structured methodology, we are almost certain to reach the cliff of complexity very soon and end up with a codebase that is hardly (if ever) ready to be refactored to be sent to production.</p>
<p>The good news is that building a complex app with R (or with any other language) is not an impossible task.
But this requires planning, rigor, and correct engineering.<br />
This is what this book is about: how to organize your Shiny App in a way that is time and code efficient, and how to use correct engineering to make your app a success.</p>
</div>
</div>
<div id="what-is-a-successful-shiny-app" class="section level2">
<h2><span class="header-section-number">1.3</span> What is a successful Shiny App?</h2>
<p>Your application does not have to be complex to be successful.
Even more, in a world where “less is more”, the more you can reduce your application complexity, the more you will be prepared for success.</p>
<p>So what is a successful Shiny app?
Defining such a metric is not an easy task, but we can extract some common patterns when it comes to applications that would be considered successful.</p>
<div id="it-exists" class="section level3">
<h3><span class="header-section-number">1.3.1</span> It exists</h3>
<p>First of all, an app is successful if it was delivered.
In other words, the developer team was able to move from specification to implementation to testing and to delivering.
This is a very engineering-oriented definition of success, but it is a pragmatic one: an app that never reaches the state of usability is not a successful app, as something along the way has blocked the process of finishing the code.</p>
<p>This condition implies a lot of things, butt mostly it implies that the team was able to organize itself in an efficient way, so that they were able to work together in making the project a success.
Anybody that has already worked on a code base as a team knows it is not an easy task.</p>
</div>
<div id="it-is-accurate" class="section level3">
<h3><span class="header-section-number">1.3.2</span> It is accurate</h3>
<p>The app was delivered, and it answers the question it is supposed to answer, or serves the purpose it is supposed to serve.
Delivering is not the only thing to keep in mind: you can deliver a working app but it might not work the way it is supposed to work.</p>
<p>Just as before, accuracy means that between the moment the idea appears in someone’s mind and the moment the app is actually ready to be used, everybody was able to work together toward a common goal, and that now this goal is reached, we are also certain that the answers we get from the application are accurate, and that users can rely on the application to make decision.</p>
</div>
<div id="it-is-usable" class="section level3">
<h3><span class="header-section-number">1.3.3</span> It is usable</h3>
<p>being usable means that the app was delivered, it serves the purpose, and it is user-friendly.
Unless you are coding for art sake, there will always be one or more end users.
And if these people cannot use the application because it is too hard to use, too hard to understand, because it is too slow or there is no inherent logic in how the user experience is designed, then it is inappropriate to call the app is a success.</p>
</div>
<div id="it-is-immortal" class="section level3">
<h3><span class="header-section-number">1.3.4</span> It is immortal</h3>
<p>Of course “immortal” is a little bit far fetched, but when designing the application, you should aim for robustness along the years, by engineering a (theoretical) application immortality.</p>
<p>Planning for the future is a very important component of a successful Shiny App project.
Once the app is out, it is successful if it can exist in the long run, with all the hazards that this implies: new package versions that could potentially break the code base, sudden call for the implementation of new features in the global interface, changing key features of the UI or the back-end, and not to mention passing the code base along to someone who has not worked on the first version, and who is now in charge of developing the next version<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>.
And this, again, is hard to do without effective planning and efficient engineering.</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-shiny">
<p>Chang, Winston, Joe Cheng, JJ Allaire, Yihui Xie, and Jonathan McPherson. 2020. <em>Shiny: Web Application Framework for R</em>. <a href="https://CRAN.R-project.org/package=shiny">https://CRAN.R-project.org/package=shiny</a>.</p>
</div>
<div id="ref-R-cyclocomp">
<p>Csardi, Gabor. 2016. <em>Cyclocomp: Cyclomatic Complexity of R Code</em>. <a href="https://CRAN.R-project.org/package=cyclocomp">https://CRAN.R-project.org/package=cyclocomp</a>.</p>
</div>
<div id="ref-R-packageMetrics2">
<p>Csardi, Gabor. 2020. <em>PackageMetrics2: Collect Metrics About R Packages</em>. <a href="http://git.mango.local/gcsardi/packageMetrics2">http://git.mango.local/gcsardi/packageMetrics2</a>.</p>
</div>
<div id="ref-R-attempt">
<p>Fay, Colin. 2019a. <em>Attempt: Tools for Defensive Programming</em>. <a href="https://CRAN.R-project.org/package=attempt">https://CRAN.R-project.org/package=attempt</a>.</p>
</div>
<div id="ref-ericraymond2003">
<p>Raymond, Eric S. 2003. <em>The Art of Unix Programming (the Addison-Wesley Professional Computng Series)</em>. Addison-Wesley.</p>
</div>
<div id="ref-R-cloc">
<p>Rudis, Bob, and Al Danial. 2020. <em>Cloc: Count Lines of Code, Comments and Whitespace in Source Files and Archives</em>. <a href="https://gitlab.com/hrbrmstr/cloc">https://gitlab.com/hrbrmstr/cloc</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>from <em>The Art of Unix Programming</em>, “Chapter 13: Speaking of Complexity”, <span class="citation">(Raymond <a href="#ref-ericraymond2003" role="doc-biblioref">2003</a>)</span><a href="successfulshinyapp.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>see <a href="https://github.com/rstudio/shiny/issues/2043#issuecomment-525640738" target="_blank">shiny/issues/2043#issuecomment-525640738</a> for an example<a href="successfulshinyapp.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>By production-grade, we mean a software that can be used in a context where people use it for doing their job, and where failures or bugs have real-life consequences<a href="successfulshinyapp.html#fnref11" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<hr/>
<footer>
<a href="rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"/></a>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="planning.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ThinkR-open/building-shiny-apps-workflow/edit/master/01-big-shiny.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
