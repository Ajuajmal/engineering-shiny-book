<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Planning Ahead | Engineering Production-Grade Shiny Apps</title>
  <meta name="description" content="Chapter 2 Planning Ahead | Engineering Production-Grade Shiny Apps" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Planning Ahead | Engineering Production-Grade Shiny Apps" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 2 Planning Ahead | Engineering Production-Grade Shiny Apps" />
  <meta name="github-repo" content="ThinkR-open/building-shiny-apps-workflow" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Planning Ahead | Engineering Production-Grade Shiny Apps" />
  
  <meta name="twitter:description" content="Chapter 2 Planning Ahead | Engineering Production-Grade Shiny Apps" />
  

<meta name="author" content="Colin Fay, Sébastien Rochette, Vincent Guyader, Cervan Girard" />


<meta name="date" content="2020-04-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="successfulshinyapp.html"/>
<link rel="next" href="structure.html"/>
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149994171-1');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/thinkr.css" type="text/css" />
<link rel="stylesheet" href="css/style_gitbook.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Production-Grade Shiny Apps</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="part"><span><b>I Building Successful Shiny Apps</b></span></li>
<li class="chapter" data-level="1" data-path="successfulshinyapp.html"><a href="successfulshinyapp.html"><i class="fa fa-check"></i><b>1</b> About Successful Shiny Apps</a></li>
<li class="chapter" data-level="2" data-path="planning.html"><a href="planning.html"><i class="fa fa-check"></i><b>2</b> Planning Ahead</a></li>
<li class="chapter" data-level="3" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>3</b> Structuring your Project</a></li>
<li class="chapter" data-level="4" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>4</b> Introduction to <code>{golem}</code></a></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> The workflow</a></li>
<li class="part"><span><b>II Step 1: Design</b></span></li>
<li class="chapter" data-level="6" data-path="matters.html"><a href="matters.html"><i class="fa fa-check"></i><b>6</b> UX Matters</a></li>
<li class="chapter" data-level="7" data-path="step-design.html"><a href="step-design.html"><i class="fa fa-check"></i><b>7</b> Don’t rush into coding</a></li>
<li class="chapter" data-level="8" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>8</b> A Gentle Introduction to CSS</a></li>
<li class="part"><span><b>III Step 2: Prototype</b></span></li>
<li class="chapter" data-level="9" data-path="setting-up-for-success-with-golem.html"><a href="setting-up-for-success-with-golem.html"><i class="fa fa-check"></i><b>9</b> Setting up for success with <code>{golem}</code></a></li>
<li class="chapter" data-level="10" data-path="stepprotopype.html"><a href="stepprotopype.html"><i class="fa fa-check"></i><b>10</b> Building an “ipsum-app”</a></li>
<li class="part"><span><b>IV Step 3: Build</b></span></li>
<li class="chapter" data-level="11" data-path="stepbuild.html"><a href="stepbuild.html"><i class="fa fa-check"></i><b>11</b> Building app with <code>{golem}</code></a></li>
<li class="part"><span><b>V Step 4: Strengthen</b></span></li>
<li class="chapter" data-level="12" data-path="step-secure.html"><a href="step-secure.html"><i class="fa fa-check"></i><b>12</b> Build yourself a safety net</a></li>
<li class="chapter" data-level="13" data-path="secure.html"><a href="secure.html"><i class="fa fa-check"></i><b>13</b> Version Control</a></li>
<li class="chapter" data-level="14" data-path="deploy-golem.html"><a href="deploy-golem.html"><i class="fa fa-check"></i><b>14</b> Deploy your application</a></li>
<li class="part"><span><b>VI Optimizing</b></span></li>
<li class="chapter" data-level="15" data-path="when-optimize.html"><a href="when-optimize.html"><i class="fa fa-check"></i><b>15</b> The Need for Optimization</a></li>
<li class="chapter" data-level="16" data-path="optim-caveat.html"><a href="optim-caveat.html"><i class="fa fa-check"></i><b>16</b> Common Application Caveats</a></li>
<li class="chapter" data-level="17" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html"><i class="fa fa-check"></i><b>17</b> Optimizing Shiny Code</a></li>
<li class="chapter" data-level="18" data-path="optimjs.html"><a href="optimjs.html"><i class="fa fa-check"></i><b>18</b> Using JavaScript</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://rtask.thinkr.fr">A book by the ThinkR team</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Production-Grade Shiny Apps</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="planning" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Planning Ahead</h1>
<div id="working-with-a-long-term-mindset" class="section level2">
<h2><span class="header-section-number">2.1</span> Working with a “long-term” mindset</h2>
<blockquote>
<p>“Rome ne fut pas faite toute en un jour”</p>
</blockquote>
<p>French proverb</p>
<div id="prepare-for-success" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Prepare for success</h3>
<p>Whatever are your ambitions for your Shiny application, you should take a little time to set robust foundations that will save a lot of time in the future.
A common thing you will hear about Shiny is that it is a good prototyping tool.
This can not be denied.
Building a Proof of Concept (POC) for an app is relatively easy if you compare to what it needs when building applications in other languages.
With Shiny, you can build a “it works on my machine” web application in a couple of hours, and show it to your team, your boss, your investors…
Thanks to the way Shiny is built, you do not have to care about websocket, ports, html, JavaScript, libraries, and all the things that are elegantly bundled straight into Shiny.</p>
<p>Hence, you can have a quick, hacky application that will work on your machine, and that, very rapidly.
But that is not the way you should start.
Indeed, starting with hacky foundations will lead to two possibilities:</p>
<ul>
<li>You will have to rewrite everything from scratch to have a robust application for production.</li>
<li>If you do not want to do that, you will get stucked with a legacy code base for the app that is built on top of hacky functions.</li>
</ul>
<p>Either way, that is an heavy technical debt.</p>
<p>The idea there is that even if Shiny is a good tool for prototyping, there is no harm in starting your application on solid ground, even for a prototype: the sooner you start with a robust framework the better, and the longer you wait the harder it gets to convert your application to a production-ready application: the larger the codebase, the harder it is to untangle everything and make it work.</p>
<p>In this book, we will present a framework called <code>{golem}</code>, which is a toolbox for building production-grade Shiny applications.
Even if <code>{golem}</code> is focused on production, there is no reason not to use it for your proof of concepts: starting a new <code>{golem}</code> project is relatively straightforward, and even if you do not use the advanced features, you can use it for very small apps.
That way, you are getting ready for complexity, and if, one day, you need to turn this small app into a production app, the foundations are there.</p>
</div>
<div id="develop-with-the-kiss-principle" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Develop with the KISS principle</h3>
<p>The KISS principle, as “Keep It Simple, Stupid”, should drive the implementation of features in the application to allow anyone in the future, including original developers, to take over on the development.</p>
<blockquote>
<p>Deeply rooted in the <a href="http://www.catb.org/~esr/writings/taoup/html/ch01s07.html">Unix Philosophy</a>, the KISS principle states that most systems work best if they are kept simple rather than made complicated; therefore, simplicity should be a key goal in design, and unnecessary complexity should be avoided.</p>
</blockquote>
<!--SHINY.SINGLETON[1efbbb1390b1f2da3adcc5776ac72d01ac3af14a]-->
<style>.right{ text-align: right;}</style>
<!--/SHINY.SINGLETON[1efbbb1390b1f2da3adcc5776ac72d01ac3af14a]-->
<div class="right">
<a href="https://en.wikipedia.org/wiki/KISS_principle">KISS principle</a>
</div>
<p>The story behind this principle is supposed to be that Kelly Johnson, lead engineer at the Lockheed Skunk Works, gave his workers a set of very common tools and said that the airplanes should be repairable with these tools, and these tools only.
The idea behind this being that repairing an aircraft should be possible for any average engineer.</p>
<p>This should be a principle to keep in mind when building application.
Indeed, large scale Shiny projects can lead to many people working on the code base, for a long period of time.
Many people means a variety of skills, with some common ground in Shiny development.
So when choosing how and what to implement, try to make a rule to go for the simplest solution<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a>, <em>i.e.</em> the one that any common Shiny Developer would be able to understand and maintain.<br />
If you go for an exotic solution or a complex technology, be sure that you are doing it for a good reason: unknown or hard to grasp technology reduce the chance of finding someone that will be able to maintain that piece of code in the future.</p>
</div>
</div>
<div id="working-as-a-team-tools-organisation" class="section level2">
<h2><span class="header-section-number">2.2</span> Working as a team: tools &amp; organisation</h2>
<p>Working as a team, whatever the coding project, requires adequate tools, discipline and organisation.
Complex Shiny Apps usually imply that several people will work on the application.
For example, at <a href="//rtask.thinkr.fr">ThinkR</a>, 3 to 4 people usually work in parallel on the same application, but there might be more people involved on larger projects.
The choice of tools and organisation is crucial for a successful application.</p>
<div id="from-the-tools-point-of-view" class="section level3">
<h3><span class="header-section-number">2.2.1</span> From the tools point of view</h3>
<div id="version-control-test-all-the-things" class="section level4">
<h4><span class="header-section-number">2.2.1.1</span> Version Control &amp; Test all the things</h4>
<p>To get informed about a code break during development, you will need to write tests for your app, and use continuous integration (CI) so that you are sure this is automatically detected<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a>.
When you are working on a complex application, chances are that you will be working on it for a significant period of time, meaning that you will write code, modify it, use it, go back to it after a few weeks, change some other things, and probably break things.
Breaking things is a natural process of software engineering, notably when working on a piece of code during a long period.
Remember the last chapter where we defined that complex applications are too large to be understood fully?
Adding code that breaks the codebase will happen with complex app, so the sooner you take measure to solve code break, the better.</p>
<p>As you can not prevent code to break, you should at least get the tooling to:</p>
<ul>
<li>Be informed that the code has broken: this is the role of tests combined with CI</li>
<li>Be able to identify changes between versions, and potentially, get back in time to a previous code base: this is the role of version control</li>
</ul>
<p>We will go deeper into testing and version control in <a href="step-secure.html#step-secure">chapter 14</a>.</p>
</div>
<div id="small-is-beautiful" class="section level4">
<h4><span class="header-section-number">2.2.1.2</span> Small is beautiful</h4>
<p>Building an application with multiple small and independant pieces will lighten your development process and your mental load.
Previous chapter introduced the notion of complexity in size, where the app grows so large that it is very hard to have a good grasp of it.
A large code base implies that the safe way to work is to split the app into pieces as much as possible.<br />
Splitting a Shiny project is made possible by following two techniques:</p>
<ul>
<li>Split your app into Shiny Modules, so that your app can be though of as a tree, making it possible for every developer to concentrate on one node, and only one, instead of having to think about the global infrastructure when implementing features</li>
</ul>
<p><img src="img/app_tree.png" /><!-- --></p>
<ul>
<li>Extract your core “non-reactive” functions, that we will also call the “business logic”, and include them in external files, so that you can work on these outside of the app.
Working on independent static files to implement features will prevent you to relaunch the whole application every time you need to add something new.</li>
</ul>
<p>We will get back to Shiny module and how to organized your project in the next chapter.</p>
</div>
</div>
<div id="from-the-organisational-point-of-view" class="section level3">
<h3><span class="header-section-number">2.2.2</span> From the organisational point of view</h3>
<p>We recommend to define two kind of developers: a unique person (or maybe two) to be in charge of supervising the whole project and developers of single functionalities. Management of the project and the communication between the two developers types will be defined around the tools, like git and its graphical interfaces.</p>
<div id="a-person-in-charge" class="section level4">
<h4><span class="header-section-number">2.2.2.1</span> A person in charge</h4>
<p>As the person in charge of the development, you will have an overview of the entire project and manage the team so that all developers create pieces of the application that correctly fit together.</p>
<p>It is hard to have the complete picture of what the app is doing everywhere.
Most of the time, it is not necessary for all developers to have this complete picture.
Defining a unique person in charge mentally loads a unique developer.
You will have to get the whole picture: what each part of the software is doing, how to make everything working together, avoid development conflicts, and of course check that, at the end of the day, the results returned by the complete application are the correct ones.</p>
<p>You will be the one that kicks off the project and write the first draft of the application.
If you follow the workflow we will describe in this book, you will create a <code>{golem}</code> project, fill the information, and define the application structure by providing the main modules and the prototype of the app.</p>
<p>Once the skeleton of the app is created, list a series of small tasks to be accomplished.
We strongly suggest to use git with a graphical interface (Gitlab, Github, Bitbucket, …).
Versionning with git can easily be integrated with R.
The graphical interface of these services will help you manage the project.
The small tasks are defined as issues in the git graphical interface and will be closed during development, while referred to specific modifications of the code (through commits).
You will also be able to set continuous integration, as recommended above, to test developers work before integration in the main development branch.</p>
<p>If you follow a <code>git flow</code> (described in chapter \@(ref: secure)) version control workflow, you will also be in charge of reviewing and accepting the pull/merge requests to the main <code>dev</code> branch if they solve the associated issues.
Note that you can also be part of the developers.
This may indeed be a recommendation as you will directly face difficulties if they arise.
However, you will need to be careful in the code review process by assigning someone else to check your work.
Do not worry if this sounds like a foreign language to you, we will get back to this method later in this book (chapter \@(ref: secure)).</p>
<p>Note that other management tools can be used there: for example <code>redmine</code>, <code>jira</code>, or any issue tracking software can play this role.</p>
</div>
<div id="developers" class="section level4">
<h4><span class="header-section-number">2.2.2.2</span> Developers</h4>
<p>As a developer, you will focus on small functionnalities, make sure to protect your work with tests and verify that your implementations do not break others work.
If the person in charge correctly splitted the work between developers of the team, you will probably be focusing on one or more parts of the application, but you do not need to know every single bit of what the application is doing.
In a perfect world, the application is split in various Shiny Modules, one module equals one file and each member of the team will be assigned a safe development of one or more modules.</p>
<p>It is simpler to work in this context where one developer is assigned to one module, although we know that in reality it may be a little more complex, and several members of the team might go back and forth working on a common module.
But, the person in charge will be there to help make all the pieces to fit together.</p>

</div>
</div>
</div>
</div>
<hr/>
<footer>
<a href="rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"/></a>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="successfulshinyapp.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="structure.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ThinkR-open/building-shiny-apps-workflow/edit/master/02-planning-ahead.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
